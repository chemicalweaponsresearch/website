(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"0Ki6":function(t,e,o){"use strict";var n=o("KEM+"),s=o.n(n),i=o("ERkP"),a=o("CHgo"),r=o("fs1G"),h=o("rHpw"),l=o("rOXj"),d=o("MWbm"),c=o("Enqy");const u=l.a.isTouchSupported(),m={zoom:1,lastX:0,lastY:0,zoomCenter:{x:0,y:0}},p={height:0,width:0,left:0,right:0,top:0,bottom:0},_=(t,e,o)=>Math.min(e,Math.max(t,o)),g=(t,e)=>Math.sqrt(Math.pow(t.clientY-e.clientY,2)+Math.pow(t.clientX-e.clientX,2));class f extends i.Component{constructor(t){super(t),s()(this,"_itemDimensions",p),s()(this,"_ref",i.createRef()),s()(this,"_setTouchableNode",(t=>{this._touchableNode!==t&&(this._touchableNode=t,this._removeTouchListener&&this._removeTouchListener(),this._touchableNode&&(this._removeTouchListener=Object(a.a)(this._touchableNode,this._handleTouchMove,!1)))})),s()(this,"_handleTouchStart",(t=>{this._ref.current&&(this._zoomedDimensions=this._ref.current.getBoundingClientRect()),this._moved=!1;const e=t.touches.length;2===e?(t.preventDefault(),this._handlePinchStart(t)):1===e&&this._handleTapStart(t)})),s()(this,"_handleTouchMove",(t=>{const e=t.touches.length;2===e?this._handlePinchMove(t):1===e&&(this._moved=!0,this._handlePanMove(t)),t.preventDefault()})),s()(this,"_handleTouchEnd",(t=>{const{maxZoom:e,minZoom:o,onTap:n}=this.props,s=_(o,e,this.state.zoom),{zoom:i}=this.state;i!==s&&1===s?this.resetZoom():this.setState({lastX:0,lastY:0,zoom:s}),0===t.touches.length?(this._lastTouchTime&&this._lastTouchTime+300>t.timeStamp?(this._clickTimer&&clearTimeout(this._clickTimer),this._handleDoubleTap(t)):i<=1&&!this._moved&&(this._clickTimer=setTimeout(n,300)),this._lastTouchTime=t.timeStamp):t.preventDefault()})),this.state={...m}}static getDerivedStateFromProps(t,e){return u&&t.resetZoom?(t.onZoomed(!1),{...m}):e}render(){if(!u)return this.props.children;const{zoom:t,zoomCenter:e}=this.state,o=this._moved,n={zoom:Object(c.spring)(t),zoomCenterX:Object(c.spring)(e.x),zoomCenterY:Object(c.spring)(e.y)};return i.createElement(d.a,{onTouchEnd:this._handleTouchEnd,onTouchStart:this._handleTouchStart,ref:this._setTouchableNode,style:y.fill},i.createElement(c.Motion,{style:n},(({zoom:t,zoomCenterX:n,zoomCenterY:s})=>i.createElement(d.a,{ref:this._ref,style:[y.fill,{transform:[{scale:t}],transformOrigin:`${o?n:e.x}px ${o?s:e.y}px`}]},this.props.children))))}componentDidMount(){u&&this._updateWindowDimensions()}componentWillUnmount(){this._removeTouchListener&&this._removeTouchListener()}resetZoom(){this.props.onZoomed(!1),this.setState({zoom:m.zoom})}_handlePanMove(t){if(this.state.zoom<=1||!this._zoomedDimensions||!this._windowDimensions)return;const{clientX:e,clientY:o}=t.touches[0];if(!this.state.lastX||!this.state.lastY)return void this.setState({lastX:e,lastY:o});const{lastX:n,lastY:s,zoomCenter:{x:i,y:a}}=this.state,{height:r,width:h}=this._windowDimensions,{height:l,width:d}=this._zoomedDimensions;let c=0,u=0;d-h>0&&(c=e-n),l-r>0&&(u=o-s),this.setState({lastX:e,lastY:o,zoomCenter:{x:Math.min(Math.max(i-c,0),h),y:Math.min(Math.max(a-u,0),r)}})}_handlePinchStart(t){const{touches:e}=t;if(this._updateWindowDimensions(),this._lastDistance=g(e[0],e[1]),1===this.state.zoom){const t=(o=e[0],n=e[1],{x:(o.clientX+n.clientX)/2,y:(o.clientY+n.clientY)/2});this.setState({zoomCenter:this._getZoomCenter(t.x,t.y)}),this.props.onZoomed(!0)}var o,n}_handlePinchMove(t){const{zoom:e,zoomCenter:o}=this.state,{maxZoom:n,maxZoomBounce:s,minZoom:i,minZoomBounce:a}=this.props;if(0===o.x&&0===o.y)return void(2===t.touches.length&&this._handlePinchStart(t));const r=g(t.touches[0],t.touches[1]),h=this._lastDistance?r/this._lastDistance:1,l=_(i-a,n+s,e*h);this._lastDistance=r,this.setState({zoom:l})}_handleTapStart(t){const{touches:e}=t;this._tapCenter=this._getZoomCenter(e[0].clientX,e[0].clientY)}_handleDoubleTap(t){const{maxZoom:e,onZoomed:o}=this.props;1!==this.state.zoom?this.resetZoom():(this._updateWindowDimensions(),this.setState({zoom:e,zoomCenter:this._tapCenter||m.zoomCenter}),o(!0))}_getZoomCenter(t,e){this._ref.current&&(this._itemDimensions=this._ref.current.getBoundingClientRect());const{left:o,top:n}=this._itemDimensions;return{x:t-o,y:e-n}}_updateWindowDimensions(){this._windowDimensions={height:window.innerHeight,width:window.innerWidth}}}s()(f,"defaultProps",{maxZoom:2.5,maxZoomBounce:.15,minZoom:1,minZoomBounce:.15,onTap:r.a,onZoomed:r.a,resetZoom:!1});const y=h.a.create((t=>({fill:{flex:1}})));e.a=f},"2doW":function(t,e,o){"use strict";var n=o("KEM+"),s=o.n(n),i=o("ERkP"),a=o("97Jx"),r=o.n(a),h=(o("kYxP"),o("3XMw")),l=o.n(h),d=o("mN6z"),c=o("U+bB"),u=o("MWbm"),m=o("0Ki6"),p=o("3dad"),_=o("r1lV"),g=o("rHpw"),f=o("JYMr");const y=l.a.b327c129,v=l.a.gff1f69e;class C extends i.PureComponent{constructor(...t){super(...t),s()(this,"state",{loadingVariant:null,imageLoading:!1}),s()(this,"_handleLoadStart",(()=>this.setState({imageLoading:!0}))),s()(this,"_handleLoadEnd",(()=>this.setState({imageLoading:!1})))}componentDidMount(){this._mountPromiseForTesting=C._selectCachedVariant(this.props.photo).then((t=>this.setState({loadingVariant:t})))}componentDidUpdate(t,e){Object(d.a)(t.photo,this.props.photo)||(this.setState({loadingVariant:null}),C._selectCachedVariant(this.props.photo).then((t=>this.setState({loadingVariant:t}))))}render(){const{dataSaver:t,onContextMenu:e,onError:o,onLoad:n,onTap:s,onZoomed:a,photo:r,resetZoom:h,zoomable:l,style:d,imageStyle:p}=this.props,{loadingVariant:_}=this.state,g=(t&&_&&Math.max(_.width,_.height)>=680?_.uri:null)||C._selectSource(r);if(!g||null===_)return null;const f=i.createElement(c.a,{accessibilityLabel:r.ext_alt_text?r.ext_alt_text:y,defaultSource:_&&_.uri,draggable:!0,onContextMenu:e,onError:_?void 0:o,onLoad:n,onLoadEnd:this._handleLoadEnd,onLoadStart:this._handleLoadStart,resizeMode:"contain",source:g,style:[b.img,p]});return i.createElement(u.a,{style:d},this.state.imageLoading?x:null,l?i.createElement(m.a,{onTap:s,onZoomed:a,resetZoom:h},f):f)}static _selectCachedVariant(t){const e=p.a.getOriginalImage(t);return e?_.a.selectLargestCachedVariant(e):Promise.resolve()}static _selectSource(t){const e=p.a.getOriginalImage(t);return e&&_.a.selectLargestUrl(e)}}s()(C,"defaultProps",{zoomable:!1});const b=g.a.create((t=>({img:{...g.a.absoluteFillObject,height:"auto",margin:"auto",maxHeight:"100%",maxWidth:"100%",width:"auto"},progressBar:{position:"absolute",top:0,zIndex:1}}))),x=i.createElement(f.a,{ariaValueText:v,indeterminate:!0,style:b.progressBar});var w=C,M=o("RCZO"),P=o("KdqI"),D=o("Modb"),E=o("XrEN");class S extends i.PureComponent{constructor(...t){super(...t),s()(this,"_handlePlaybackStarted",(()=>{this._player&&!this.props.isCurrentlyDisplayed&&this._player.pause()})),s()(this,"_setPlayer",(t=>{this._player=t,this._player&&this.props.isCurrentlyDisplayed&&this._player.play()}))}render(){const{style:t}=this.props;return i.createElement(u.a,{style:t},i.createElement(u.a,{style:T.root},this._renderVideo()))}componentDidUpdate(t){const{isCurrentlyDisplayed:e}=this.props;this._player&&e!==t.isCurrentlyDisplayed&&(e?this._player.play():this._player.pause())}_renderVideo(){const{promotedContent:t,video:e,videoId:o}=this.props;return i.createElement(D.a,r()({},E.a.extractVideoProps(o,e),{onPlaybackStarted:this._handlePlaybackStarted,playbackCoordination:null,promotedContent:t,setPlayer:this._setPlayer,withPostPlayback:!0}))}}const T=g.a.create({root:{flexBasis:0,flexGrow:1,flexShrink:1,justifyContent:"center"}});var I=S,L=o("ziVO"),Z=o("q9Zt"),z=o("mjJ+"),k=o("7N4s"),O=o("JsJV");const R=l.a.ac85c6b1,Y=l.a.f46c1d5e;class B extends i.Component{constructor(...t){super(...t),s()(this,"state",{error:null,contextMenuPoint:{top:0,left:0},showContextMenu:!1,containerDimensions:{width:0,height:0}}),s()(this,"_handleError",(t=>{this.setState({error:t.nativeEvent.error})})),s()(this,"_handleLoad",(()=>{this.setState({error:null})})),s()(this,"_handleMediaPress",(t=>{t.stopPropagation()})),s()(this,"_handleRetry",(()=>{this.setState({error:null})})),s()(this,"_handleContextMenu",(t=>{Object(P.e)()&&(t.preventDefault(),t.stopPropagation(),this.setState({contextMenuPoint:{left:t.clientX,top:t.clientY}}),this.setState({showContextMenu:!0}))})),s()(this,"_handleContextCancel",(()=>this.setState({showContextMenu:!1}))),s()(this,"_handleOpenImageURI",(()=>{O.a.openURL(this.props.mediaDetail.media_url_https),this._handleContextCancel()})),s()(this,"_getContextMenuItems",(()=>[{text:Y,onClick:this._handleOpenImageURI}])),s()(this,"_handleLayout",(t=>{const{nativeEvent:{layout:{height:e,width:o}}}=t;this.setState({containerDimensions:{width:o,height:e}})}))}shouldComponentUpdate(t,e){return!Object(d.a)(t,this.props)||!Object(d.a)(e,this.state)}UNSAFE_componentWillReceiveProps(t){this.setState({error:null,showContextMenu:!1})}render(){let t;const{isCurrentlyDisplayed:e,mediaDetail:o,onDismiss:n,onTap:s,promotedContent:a,videoId:h,isAvatar:l,...d}=this.props,{width:c,height:m}=o.original_info||{},{error:p,showContextMenu:_,containerDimensions:{width:g,height:f}}=this.state,{isModal:y}=this.context,v=y||l?Object(M.f)({mediaWidth:c,mediaHeight:m,containerWidth:g,containerHeight:f},l):X.mediaItem;return o&&(t=["animated_gif","video","vine"].indexOf(o.type)>-1),i.createElement(L.a,{onDismiss:n,onLayout:y||l?this._handleLayout:void 0,style:X.root},p?i.createElement(Z.a,{onRetry:this._handleRetry,style:X.errorDetail,title:R,withLightOnDarkColorScheme:!0}):null,_?i.createElement(z.a,{items:this._getContextMenuItems(),onCloseRequested:this._handleContextCancel,position:this.state.contextMenuPoint}):null,p?null:i.createElement(u.a,{onClick:this._handleMediaPress,style:v},"photo"===o.type?i.createElement(w,r()({},d,{imageStyle:l&&X.avatarImage,onContextMenu:this._handleContextMenu,onError:this._handleError,onLoad:this._handleLoad,onTap:s,photo:o,style:X.container,zoomable:!0})):null,t&&h?i.createElement(I,{isCurrentlyDisplayed:e,promotedContent:a,style:X.container,video:o,videoId:h}):null))}}s()(B,"contextType",k.a);const X=g.a.create((t=>({root:{flexGrow:1,justifyContent:"center",alignItems:"center",flexShrink:1},mediaItem:{flexGrow:1,width:"100%",height:"100%"},container:{height:"100%",position:"absolute",width:"100%"},errorDetail:{alignItems:"center",alignSelf:"center",justifyContent:"center",position:"absolute",height:"100%",maxWidth:400},avatarImage:{borderRadius:t.borderRadii.infinite,margin:t.spaces.space16}})));var W=B,V=o("lklz"),U=o("uavX"),j=o("fs1G");class N extends i.Component{constructor(t,e){super(t,e),s()(this,"_isItemVideo",(t=>["video","animated_gif","vine"].includes(t.type))),s()(this,"_getItemVideoId",(t=>{const{videoId:e}=this.props;return e||(t=>V.b.forTweet(t.expanded_url.split("/")[3]))(t)})),s()(this,"_handleMediaDetailZoomed",(t=>{const{onMediaDetailZoomed:e}=this.props;this.state.isZoomed!==t&&this.setState({isZoomed:t}),e&&e(t)})),this.state={isZoomed:!1}}shouldComponentUpdate(t,e){return!Object(d.a)(t,this.props)||!Object(d.a)(e,this.state)}render(){const{dataSaver:t,dominantColor:e,mediaIndex:o,mediaItems:n,onDismiss:s,onMediaItemChanged:a,onTap:r,promotedContent:h}=this.props,{isZoomed:l}=this.state,d=n.map(((e,a)=>{const d=this._isItemVideo(e),c=this._getItemVideoId(e),u=o===a;return d&&c||!d?i.createElement(W,{dataSaver:t,isAvatar:this.props.isAvatar,isCurrentlyDisplayed:u,key:a,mediaDetail:n[a],onDismiss:l?void 0:s,onTap:r,onZoomed:u?this._handleMediaDetailZoomed:void 0,promotedContent:h,resetZoom:o!==a,videoId:c}):null}));return i.createElement(u.a,{style:J.root},n.length>1?i.createElement(U.a,{currentSlide:o,dominantColor:e,locked:l||1===n.length,onChange:a,shouldAlwaysEnableKeyboardNavigation:!0,withReducedNavButtonClickArea:this._isItemVideo(n[o])},d):d)}}s()(N,"defaultProps",{mediaIndex:0,onMediaDetailZoomed:j.a,onMediaItemChanged:j.a});const J=g.a.create((t=>({root:{flex:1,zIndex:1}})));e.a=N},JsJV:function(t,e,o){"use strict";var n=o("6/RC"),s=o("tI3i"),i=o.n(s),a=n.canUseDOM?window.location.href:"",r={addEventListener:function(){},removeEventListener:function(){},canOpenURL:function(){return Promise.resolve(!0)},getInitialURL:function(){return Promise.resolve(a)},openURL:function(t){try{return h(t),Promise.resolve()}catch(t){return Promise.reject(t)}},_validateURL:function(t){i()("string"==typeof t,"Invalid URL: should be a string. Was: "+t),i()(t,"Invalid URL: cannot be empty")}},h=function(t){n.canUseDOM&&(window.location=new URL(t,window.location).toString())};e.a=r},UPvq:function(t,e,o){"use strict";o.d(e,"a",(function(){return f}));var n=o("KEM+"),s=o.n(n),i=(o("kYxP"),o("ERkP")),a=o("RCZO"),r=o("3XMw"),h=o.n(r),l=o("hOZg"),d=o("MWbm"),c=o("mw9i"),u=o("cm6r"),m=o("/yvb"),p=o("7N4s"),_=o("rHpw");const g=h.a.ia5e7487;class f extends i.Component{constructor(...t){super(...t),s()(this,"_handleCloseButtonPress",(t=>{t.stopPropagation();const{onCloseButtonPress:e}=this.props;e()})),s()(this,"_handleBackgroundPress",(()=>{const{onCloseButtonPress:t}=this.props,{isModal:e}=this.context;e&&t()}))}render(){const{children:t,backgroundColor:e,mediaItem:o,mediaUrl:n,hideButtons:s,topRightButton:r,footerButtons:h,overlayFooter:p}=this.props,{isModal:_}=this.context,f={backgroundColor:e.rgba,...a.a},v={backgroundColor:e.rgb,...a.a},C=[y.root,_?f:v,{position:_?"relative":"fixed"}];return i.createElement(i.Fragment,null,i.createElement(d.a,{onClick:this._handleBackgroundPress,style:C},t,h?i.createElement(d.a,{pointerEvents:s?"none":void 0,style:[y.footerButtons,p&&f,p&&y.footerButtonsAbsolute,s&&y.fadeOut]},i.createElement(c.a,{withGutter:!0},h)):null),i.createElement(u.a,{accessibilityRole:"none",interactiveStyles:null,onClick:this._handleCloseButtonPress,pointerEvents:s?"none":void 0,style:[y.buttonWrapper,y.buttonWrapperLeft,a.a,s&&y.fadeOut]},(t=>i.createElement(m.a,{accessibilityLabel:g,dominantColor:e.rgb,hoverLabel:{label:g},icon:i.createElement(l.a,null),interactivityState:t,onClick:this._handleCloseButtonPress,type:o||n?"onMedia":"invertedPrimary"}))),r?i.createElement(d.a,{pointerEvents:s?"none":void 0,style:[y.buttonWrapper,y.buttonWrapperRight,a.a,s&&y.fadeOut]},r):null)}}s()(f,"contextType",p.a),s()(f,"defaultProps",{hideButtons:!1});const y=_.a.create((t=>({root:{overflowX:"hidden",overflowY:"hidden",height:"100%",width:"100%"},buttonWrapper:{position:"absolute",top:0,padding:t.spaces.space12,alignItems:"center",justifyContent:"center",cursor:"pointer"},buttonWrapperLeft:{left:0},buttonWrapperRight:{right:0},fadeOut:{opacity:0},footerButtons:{width:"100%",alignSelf:"center"},footerButtonsAbsolute:{position:"absolute",bottom:0,paddingBottom:_.a.iPhoneOffsetBottom,zIndex:1}})))},ziVO:function(t,e,o){"use strict";var n=o("KEM+"),s=o.n(n),i=(o("kYxP"),o("ERkP")),a=o("MWbm");const r={startX:0,startY:0};class h extends i.Component{constructor(...t){super(...t),s()(this,"_pullDistanceY",0),s()(this,"_pullInfo",{...r}),s()(this,"_handleTouchStart",(t=>{this._pullInfo.startX=t.touches[0].clientX,this._pullInfo.startY=t.touches[0].clientY})),s()(this,"_handleTouchMove",(t=>{if("number"!=typeof this._pullInfo.startX||"number"!=typeof this._pullInfo.startY)return;const e=t.touches[0],o=e.clientX-this._pullInfo.startX,n=e.clientY-this._pullInfo.startY;Math.abs(o)>10||(t.preventDefault(),this._updatePullPosition(n))})),s()(this,"_handleTouchEnd",(t=>{Math.abs(this._pullDistanceY)>50?this._handleDismiss():this._resetPullInfo()})),s()(this,"_updatePullPosition",(t=>{this._pullDistanceY=t})),s()(this,"_handleDismiss",(()=>{const{onDismiss:t}=this.props;t&&t(),this._resetPullInfo()})),s()(this,"_resetPullInfo",(()=>{this._updatePullPosition(0),this._pullInfo={...r}}))}render(){const{children:t,onDismiss:e,onLayout:o,style:n}=this.props,s=!!e;return i.createElement(a.a,{onLayout:o,onTouchEnd:s?this._handleTouchEnd:void 0,onTouchMove:s?this._handleTouchMove:void 0,onTouchStart:s?this._handleTouchStart:void 0,style:n},t)}}e.a=h}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/shared~bundle.DirectMessages~bundle.TweetMediaDetail~bundle.UserAvatar.d73ed535.js.map