(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"45mF":function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));var a=s("1YZw"),i=s("pXBW"),n=s("3XMw"),o=s.n(n),r=s("SrIh");const l=o.a.a5d4fda0,d=(e=l,t=!0)=>({customErrorHandler:s=>{const{context:n}=s;return!s instanceof i.a&&(s.message=`Strato error occurred in ${n.id}: ${n.action}`),Object(r.a)(s,{extra:{context:n,isStrato:!0}}),t?Object(a.b)({text:e}):[]}})},"6XNv":function(e,t,s){"use strict";var a=s("KEM+"),i=s.n(a),n=(s("kYxP"),s("ERkP")),o=s("t62R"),r=s("piX5"),l=s("FG+G"),d=s("rHpw"),c=(s("aWzz"),s("k/Ka")),h=s("MWbm");const p=n.forwardRef(((e,t)=>Object(c.a)("select",{...e,ref:t}))),u=e=>Object(c.a)("option",e);class m extends n.PureComponent{constructor(...e){super(...e),i()(this,"_selectRef",n.createRef()),i()(this,"state",{isFocused:!1}),i()(this,"_handleChange",(e=>{const{onChange:t,withEmptyOption:s}=this.props,{selectedIndex:a,value:i}=e.target;t&&t(i,a-(s?1:0))})),i()(this,"_handleBlur",(e=>{const{onBlur:t}=this.props;this.setState({isFocused:!1}),t&&t()})),i()(this,"_handleFocus",(e=>{const{onFocus:t}=this.props;this.setState({isFocused:!0}),t&&t()}))}componentDidMount(){this.props.autofocus&&this._selectRef&&this._selectRef.current&&this._selectRef.current.focus()}render(){const{style:e,disabled:t,options:s,value:a,label:i,hasError:o,errorText:d,helperText:c,testID:m,withEmptyOption:_}=this.props,{isFocused:y}=this.state;return n.createElement(n.Fragment,null,n.createElement(h.a,{style:[r.a.border,g.container,t&&r.a.disabled,y&&r.a.focusedBorderValid,(o||d)&&r.a.invalidBorderColor,y&&(o||d)&&r.a.focusedBorderInvalid,e]},this._renderLabel(),n.createElement(p,{accessibilityLabel:i,disabled:t,id:i,onBlur:this._handleBlur,onChange:this._handleChange,onFocus:this._handleFocus,ref:this._selectRef,style:[g.select,t&&r.a.disabled],testID:m||"",value:a},_?n.createElement(u,{disabled:!0,style:g.option,value:""}):null,s.map((e=>{const{disabled:t,label:s,value:a}=e;return n.createElement(u,{disabled:t,key:`${s}-${a}`,style:g.option,value:a},s)}))),n.createElement(l.a,{style:[g.dropdownCaret,y&&r.a.validColor,(o||d)&&r.a.invalidColor]})),c?this._renderHelperText():null,d?this._renderErrorText():null)}_renderLabel(){const{errorText:e,hasError:t,label:s}=this.props,{isFocused:a}=this.state;return n.createElement(o.c,{color:t||e?"red500":a?"primary":"gray600",style:g.label},s)}_renderHelperText(){return n.createElement(h.a,{accessibilityLiveRegion:"polite"},n.createElement(o.c,{color:"gray600",style:g.helperText},this.props.helperText))}_renderErrorText(){return n.createElement(h.a,{accessibilityLiveRegion:"polite"},n.createElement(o.c,{color:"red500",style:g.helperText},this.props.errorText))}}i()(m,"defaultProps",{disabled:!1,autofocus:!1,withEmptyOption:!1}),m.propTypes={};const g=d.a.create((e=>({container:{backgroundColor:e.colors.cellBackground},dropdownCaret:{color:e.colors.gray600,height:"1.5em",pointerEvents:"none",position:"absolute",marginTop:"-0.75em",top:"50%",right:e.spaces.space12},label:{position:"absolute",fontSize:e.fontSizes.small,paddingHorizontal:e.spaces.space4,paddingTop:e.spaces.space4,pointerEvents:"none",lineHeight:e.lineHeights.subtext2},option:{backgroundColor:e.colors.navigationBackground},select:{appearance:"none",backgroundColor:"transparent",borderRadius:e.borderRadii.none,borderWidth:e.borderWidths.none,color:e.colors.text,cursor:"pointer",fontSize:e.fontSizes.headline2,lineHeight:e.lineHeights.body,margin:0,marginTop:e.spaces.space16,outlineStyle:"none",padding:0,paddingTop:e.spaces.space12,paddingBottom:e.spaces.space4,paddingHorizontal:e.spaces.space4},helperText:{fontSize:e.fontSizes.small,paddingHorizontal:e.spaces.space4,paddingTop:e.spaces.space2}})));t.a=m},LT7J:function(e,t,s){"use strict";s.d(t,"b",(function(){return u})),s.d(t,"a",(function(){return m}));s("kYxP");var a=s("j7tW"),i=s("1YZw"),n=s("rxPX"),o=s("0KEI"),r=s("0pUJ"),l=s("RqPI"),d=s("XOJV"),c=s("G6rE"),h=s("HAhZ"),p=s("ymux");const u="conversation_muted_education",m="hide_reply_author_education",g=(e,t)=>Object(h.b)(e,u),_=(e,t)=>Object(h.b)(e,m),y=e=>t=>Promise.all([t(d.a.delete(e)),t(Object(p.a)({focalTweetId:e}).deleteTimeline())]);t.c=Object(n.a)().propsFromState((()=>({userCountry:l.l,shouldShowMuteEducationTip:g,shouldShowHideReplyTip:_}))).propsFromActions((()=>({addTip:h.a,addToast:i.b,block:c.e.block,createLocalApiErrorHandler:Object(o.d)("TWEET_CURATION_ACTION_SHEET_CONTAINER"),deleteTweet:y,dismissUserFromConversation:p.b,follow:c.e.follow,hideReply:d.a.hideReply,mute:r.a,muteTweet:d.a.mute,ouch:d.a.ouch,pin:a.a,removeTag:d.a.removeTag,unblock:c.e.unblock,unfollow:c.e.unfollow,unhideReply:d.a.unhideReply,unmute:c.e.unmute,unmuteTweet:d.a.unmute,unpin:a.c}))).withAnalytics()},MXY2:function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));var a=s("3XMw"),i=s.n(a);const n=i.a.bea869b3,o=i.a.f70a36d0,r=i.a.d17df547,l=i.a.h735a98d,d=e=>{const t=e.inReplyToStatus&&!e.isSelfThreadReply;return e.isScheduled?l:t?r:e.isThread?o:n}},Oib4:function(e,t,s){"use strict";var a=s("ERkP"),i=s("Lsrn"),n=s("k/Ka");const o=(e={})=>Object(n.a)("svg",{...e,style:[i.a.root,e.style],viewBox:"0 0 24 24"},a.createElement("g",null,a.createElement("path",{d:"M12 1.25C6.072 1.25 1.25 6.072 1.25 12S6.072 22.75 12 22.75 22.75 17.928 22.75 12 17.928 1.25 12 1.25zm.025 16.468c-.708 0-1.28-.574-1.28-1.28 0-.71.572-1.282 1.28-1.282.708 0 1.28.573 1.28 1.28.002.708-.57 1.282-1.28 1.282zM14.47 7.636l-1.815 6.098c-.063.212-.258.357-.48.357h-.298c-.222 0-.416-.145-.48-.356L9.583 7.636c-.045-.152-.016-.316.08-.442.093-.127.24-.2.4-.2h3.927c.157 0 .306.073.4.2.094.126.124.29.08.442z"})));o.metadata={width:24,height:24},t.a=o},Ub51:function(e,t,s){"use strict";var a=s("97Jx"),i=s.n(a),n=s("KEM+"),o=s.n(n),r=(s("MvUL"),s("Qavd"),s("kYxP"),s("ERkP")),l=s("v6aA"),d=s("6/RC"),c=s("wpu3"),h=s("rxPX"),p=s("0KEI"),u=s("eSoz"),m=s("o3oN");const g=(e,t)=>{const s=t.selectedCommunityId;return s?u.a.select(e,s):void 0};var _=Object(h.a)().propsFromState((()=>({communities:u.b,selectedCommunity:g,fetchStatus:m.c}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(p.d)("COMMUNITIES_CONTROLS"),fetchCommunityMemberships:m.a}))),y=s("kGix"),b=s("FG+G"),C=s("YeIG"),f=s("Zg3A"),w=s("MWbm"),T=s("MtXG"),v=s("t62R"),x=s("CKsB"),S=s("rHpw"),E=s("3XMw"),I=s.n(E);const R=I.a.d58baa7e;class k extends r.Component{constructor(...e){super(...e),o()(this,"_renderCount",(e=>{const t=R(e);return r.createElement(T.a.Group,null,r.createElement(T.a,null,r.createElement(v.c,{color:"white"},r.createElement(I.a.I18NFormatMessage,{$i18n:"b38e130b"},r.createElement(T.a.Value,null,I.a.ibd0106d({formattedCount:t})),r.createElement(T.a.Label,null,I.a.cface2d0({count:e}))))))})),o()(this,"_createClickHandler",(e=>()=>{const{onCommunityValueChange:t,dismiss:s}=this.props;t(e),s()}))}render(){const{communities:e,selectedCommunityId:t}=this.props;return r.createElement(w.a,{style:A.root},r.createElement(w.a,null,r.createElement(v.c,{size:"large",style:A.title,weight:"bold"},"Choose audience"),r.createElement(x.a,{Icon:f.a,actionText:"Everyone",isSelected:!!t,onClick:this._createClickHandler(void 0),style:A.menuItem,withIconAsThumbnail:!0})),r.createElement(w.a,null,r.createElement(v.c,{style:A.title,weight:"bold"},"Communities"),Object.keys(e).map((s=>{const a=e[s];return a?r.createElement(x.a,{actionSubText:this._renderCount(a.member_count),actionText:a.name,isSelected:t===s,key:s,media:a.media,onClick:this._createClickHandler(s),selectable:!0,style:A.menuItem}):null}))))}}const A=S.a.create((e=>({hidden:{visibility:"hidden"},title:{flexDirection:"column",paddingVertical:e.spaces.space4,paddingHorizontal:e.spaces.space12},root:{flexDirection:"column",paddingTop:e.spaces.space12,paddingBottom:e.spaces.space12},menuItem:{alignItems:"center"}})));var M=k,B=s("efqG"),D=s("/yvb");const O=r.createElement(b.a,null);class L extends r.Component{constructor(...e){super(...e),o()(this,"_renderContent",(e=>{const{onCommunityValueChange:t,communities:s,selectedCommunityId:a}=this.props;return r.createElement(M,{communities:s,dismiss:e,onCommunityValueChange:t,selectedCommunityId:a})}))}componentDidMount(){const{fetchCommunityMemberships:e,fetchStatus:t,createLocalApiErrorHandler:s}=this.props;t===y.a.NONE&&e().catch(s())}render(){const{communities:e,selectedCommunity:t}=this.props;return Object(C.a)(e)?null:r.createElement(r.Fragment,null,r.createElement(w.a,{style:[P.container]},r.createElement(B.a,{renderContent:this._renderContent},r.createElement(D.a,{icon:O,size:"small",type:"secondary"},t?t.name:"Everyone"))))}}const P=S.a.create((e=>({button:{paddingHorizontal:e.spaces.space4},container:{display:"inline-flex",flexDirection:"row",paddingBottom:e.spaces.space12},hidden:{visibility:"hidden"},root:{flexDirection:"column",paddingTop:e.spaces.space16,paddingBottom:e.spaces.space16}})));var F=_(L),H=s("H7Rt"),N=s("GlV0"),j=s("krmn"),V=s("cIoY"),U=s("w3n3"),z=s("MLl7"),W=s("DtVZ"),K=s("1auM"),G=s("07FG"),$=s("Q8CU"),q=s("QbaN"),X=s("VPdC"),Y=s("p+r5"),J=s("GWvE");class Q extends r.Component{constructor(...e){super(...e),o()(this,"_setInputRef",(e=>{this._inputRef=e}))}render(){const{autoFocus:e,defaultValue:t,editable:s,label:a,onChange:i,name:n}=this.props;return r.createElement(w.a,{style:Z.root},r.createElement(Y.a,{autoCapitalize:"none",autoCorrect:!1,autoFocus:e,defaultValue:t,editable:s,label:a,maxLength:25,name:n,onChange:i,ref:this._setInputRef,spellCheck:"false",style:Z.formTextInput}))}get value(){return this._inputRef&&this._inputRef.getValue()}get isValid(){const{optional:e}=this.props;return!this.value&&e||this.value&&!Object(J.a)(this.value)&&this._inputRef&&this._inputRef.isValidLength()}}o()(Q,"defaultProps",{autoFocus:!1,editable:!0,optional:!1});const Z=S.a.create((e=>({root:{flexDirection:"row",flexShrink:1},action:{width:e.spaces.space40},addButton:{flexGrow:1,minHeight:"100%",padding:0},formTextInput:{flexGrow:1,flexShrink:1,marginVertical:0,paddingTop:0,paddingHorizontal:0,paddingBottom:e.spaces.space12}})));var ee=Q,te=s("mtvn"),se=s("6XNv");class ae extends r.PureComponent{render(){const{editable:e,label:t,last:s,max:a,min:i,onChange:n,value:o}=this.props,l=!e||i===a,d=o.toString(),c=Object(te.a)(i,a+1).map((e=>({label:`${I.a.ia24dc8c(e)}`,value:`${e}`})));return r.createElement(se.a,{disabled:l,label:t,onChange:n,options:c,style:[ie.selector,!s&&ie.rightMargin],value:d})}}o()(ae,"defaultProps",{last:!1});const ie=S.a.create((e=>({rightMargin:{marginRight:e.spaces.space20},selector:{flexGrow:1}})));var ne=ae;const oe=I.a.caf8edc4,re=I.a.g93586be,le=I.a.d073b644,de=I.a.a2f0728e;class ce extends r.Component{constructor(e,t){super(e,t),o()(this,"_handleDaysChange",(e=>{const t=parseInt(e,10);this.setState((e=>{const{hours:s,minutes:a}=e.duration,i=0===t&&0===s&&0===a?1:7===t?0:s;return{duration:{days:t,hours:i,minutes:7===t?0:0===t&&0===i&&a<5?5:a}}}))})),o()(this,"_handleHoursChange",(e=>{const t=parseInt(e,10);this.setState((e=>{const{days:s,minutes:a}=e.duration;return{duration:{days:s,hours:t,minutes:0===s&&0===t&&a<5?5:a}}}))})),o()(this,"_handleMinutesChange",(e=>{const t=parseInt(e,10);this.setState((e=>{const{days:s,hours:a}=e.duration;return{duration:{days:s,hours:a,minutes:t}}}))})),this.state={duration:e.initialDuration}}render(){const{style:e,isActive:t}=this.props;return r.createElement(w.a,{style:e},r.createElement(v.c,{color:"normal",style:he.durationLabel},t?oe:""),this._renderPicker())}_renderPicker(){const{editable:e,isActive:t}=this.props,{duration:{days:s,hours:a,minutes:i}}=this.state;return r.createElement(w.a,{style:he.durationControls},r.createElement(ne,{editable:e&&t,label:re,max:7,min:0,onChange:this._handleDaysChange,value:s}),r.createElement(ne,{editable:e&&t,label:le,max:7===s?0:23,min:0,onChange:this._handleHoursChange,value:a}),r.createElement(ne,{editable:e&&t,label:de,last:!0,max:7===s?0:59,min:0===s&&0===a?5:0,onChange:this._handleMinutesChange,value:i}))}get duration(){return this.state.duration}}o()(ce,"defaultProps",{editable:!0,initialDuration:{days:1,hours:0,minutes:0}});const he=S.a.create((e=>({durationControls:{flexDirection:"row",justifyContent:"space-between"},durationLabel:{marginBottom:e.spaces.space4}})));var pe=ce,ue=s("iY63"),me=s("Irs7"),ge=s("jtO7");const _e=I.a.g589c2e1,ye=I.a.a1e6c3a1,be=I.a.a739e006,Ce=I.a.d89a5b92,fe=I.a.c2a8118d,we=I.a.a8ede1de,Te=I.a.af40a8ef;class ve extends r.Component{constructor(e,t){super(e,t),o()(this,"_setChoice1Ref",(e=>{this._choice1=e})),o()(this,"_setChoice2Ref",(e=>{this._choice2=e})),o()(this,"_setChoice3Ref",(e=>{this._choice3=e})),o()(this,"_setChoice4Ref",(e=>{this._choice4=e})),o()(this,"_setDurationPickerRef",(e=>{this._durationPicker=e})),o()(this,"_handleValidation",(()=>{const{onValid:e,onInvalid:t}=this.props,s=this.choices,{_choice1:a,_choice2:i,_choice3:n,_choice4:o}=this,r=[a,i,n,o].filter(Boolean).every((e=>e.isValid));s&&s.length>=2&&r?e():t()})),o()(this,"_handleAdd",(()=>{const{analytics:e}=this.props;e.scribe({element:"add_poll_option",action:"click"}),this.setState((({choiceCount:e})=>({autoFocus:!0,choiceCount:e+1})))}));const{initialChoices:s}=e,a=void 0===s,i=(s||[]).length,n=i>2?i:2;this.state={autoFocus:a,choiceCount:n}}render(){const{editable:e,initialChoices:t=[],initialDuration:s,isActive:a,onRemove:i}=this.props,{autoFocus:n,choiceCount:o}=this.state;return r.createElement(w.a,{style:xe.root},r.createElement(w.a,{style:xe.choicesAndAddButton},r.createElement(w.a,{style:xe.choices},r.createElement(ee,{autoFocus:n,defaultValue:t[0],editable:e&&a,label:_e,name:"Choice1",onChange:this._handleValidation,ref:this._setChoice1Ref}),r.createElement(ee,{defaultValue:t[1],editable:e&&a,label:ye,name:"Choice2",onChange:this._handleValidation,ref:this._setChoice2Ref}),o>=3?r.createElement(ee,{autoFocus:n,defaultValue:t[2],editable:e&&a,label:be,name:"Choice3",onChange:this._handleValidation,optional:!0,ref:this._setChoice3Ref}):null,4===o?r.createElement(ee,{autoFocus:n,defaultValue:t[3],editable:e&&a,label:Ce,name:"Choice4",onChange:this._handleValidation,optional:!0,ref:this._setChoice4Ref}):null),r.createElement(w.a,{style:xe.rightColumn},o<4?r.createElement(D.a,{accessibilityLabel:we,disabled:!(e&&a),hoverLabel:{label:Te},icon:r.createElement(ue.a,null),onPress:this._handleAdd,size:"normal",style:xe.addButton,type:"text"}):null)),r.createElement(pe,{editable:e,initialDuration:s,isActive:a,ref:this._setDurationPickerRef,style:xe.durationPicker}),r.createElement(w.a,{style:xe.removePollButton},r.createElement(ge.a,{color:"red500",label:fe,onPress:i,withBottomBorder:!1})))}get choices(){const{_choice1:e,_choice2:t,_choice3:s,_choice4:a}=this;return[e&&e.value,t&&t.value,s&&s.value,a&&a.value].filter(Boolean)}get duration(){return this._durationPicker?this._durationPicker.duration:void 0}}const xe=S.a.create((e=>({root:{flexDirection:"column",backgroundColor:e.colors.transparent,borderColor:e.colors.nestedBorderColor,borderRadius:e.borderRadii.xLarge,borderStyle:"solid",borderWidth:e.borderWidths.small,paddingTop:e.spaces.space12,overflow:"hidden"},choicesAndAddButton:{paddingLeft:e.spaces.space16,paddingRight:e.spaces.space16,flexDirection:"row"},choices:{flexGrow:1,flexShrink:1,marginRight:e.spaces.space4},removePollButton:{borderBottomLeftRadius:e.borderRadii.xLarge,borderBottomRightRadius:e.borderRadii.xLarge},rightColumn:{flexDirection:"column-reverse",marginRight:`calc(-1 * ${e.spaces.space12})`,paddingBottom:e.spaces.space12,width:e.spaces.space40},addButton:{marginBottom:e.spaces.space32},durationPicker:{borderTopColor:e.colors.nestedBorderColor,borderTopWidth:1,borderBottomColor:e.colors.nestedBorderColor,borderBottomWidth:1,paddingBottom:e.spaces.space12,paddingLeft:e.spaces.space16,paddingRight:e.spaces.space16,paddingTop:e.spaces.space12}})));var Se=Object(me.a)(ve),Ee=s("b5s6"),Ie=s("rcen"),Re=s("zmS9"),ke=s("WPfJ"),Ae=S.a.create((e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal},avatarContainerExpanded:{paddingTop:e.spaces.space4},avatarContainer:{justifyContent:"center"},avatar:{width:"100%"},rightColumn:{paddingTop:e.spaces.space4,justifyContent:"center",position:"static",transitionProperty:"opacity, color",transitionDuration:"0.1s",transitionTimingFunction:"ease-out"},composeBoxContainer:{display:"flex",flexDirection:"column",flexGrow:1,flexShrink:1,position:"static",zIndex:1},inputArea:{zIndex:1},dragDrop:{borderColor:e.colors.transparent,borderRadius:e.borderRadii.small,borderStyle:"solid",borderWidth:e.borderWidths.medium},textInputArea:{alignItems:"center",flexDirection:"row",justifyContent:"space-between",zIndex:ke.f},textInputStyle:{paddingHorizontal:0},textInputMobileCollapsed:{maxHeight:e.fontSizes.xLarge,padding:0,overflow:"hidden"},tweetAttachmentArea:{zIndex:ke.e},iconEmojiPicker:{zIndex:ke.c},toolBar:{alignItems:"center",backgroundColor:e.colors.cellBackground,flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between",marginHorizontal:e.spaces.space2,zIndex:ke.a},firstToolBarButton:{marginLeft:`-${e.spaces.space12}`},toolBarButton:{marginHorizontal:0},toolBarIconsContainer:{alignItems:"center",flexDirection:"row",marginTop:e.spaces.space12},separator:{width:"1px",backgroundColor:e.colors.gray300,height:e.fontSizes.jumbo,marginRight:e.spaces.space12,marginLeft:`calc(${e.spaces.space12} - 2px)`},conversationLine:{alignSelf:"center",backgroundColor:e.colors.gray200,flexGrow:1,flexShrink:1,minHeight:0,width:e.componentDimensions.conversationLineWidth,marginTop:e.spaces.space4,marginBottom:e.spaces.space4},conversationLineWithOverflow:{marginTop:`-${e.spaces.space4}`},attachmentContainer:{marginTop:e.spaces.space4,marginBottom:e.spaces.space4},mediaPreview:{marginTop:e.spaces.space4},quoteTweet:{backgroundColor:e.colors.transparent,marginTop:e.spaces.space4,marginBottom:0},addImageTextContainer:{alignSelf:"flex-start",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},addImageActionIcon:{marginRight:e.spaces.space2},addImageTextPadding:{marginEnd:e.spaces.space48},imageActions:{alignItems:"center",flexDirection:"row",flexWrap:"wrap",marginTop:e.spaces.space4},blurStyle:{opacity:.5},inputStyle:{width:"100%"},collapsedInputStyle:{flexGrow:1,flexShrink:1},highlightedText:{borderRadius:e.borderRadii.large,paddingVertical:e.spaces.space12,paddingLeft:e.spaces.space12,marginTop:0,marginBottom:0},highlightedTextInner:{marginHorizontal:e.spaces.space4}}))),Me="addButton",Be="altTextLabel",De="attachments",Oe="taggedUsersLabel",Le="tweetTextarea_",Pe="toolBar",Fe="scheduleOption",He=s("xM7j"),Ne=s("6OUF"),je=s("tZIO"),Ve=s("5mJL"),Ue=s("DNho"),ze=s("oSwX"),We=s("rFBM"),Ke=s("zfvc"),Ge=s("Ujvi"),$e=s("yTN1"),qe=s("gpVt"),Xe=s("hOZg"),Ye=s("ll3R"),Je=s("J0mu"),Qe=s("gBde"),Ze=s("boUI"),et=s("6ZHn"),tt=s("/WPq"),st=s("wpLu"),at=s("oQhu"),it=s("pKoL"),nt=s("9Xij");class ot extends r.Component{render(){const{media:e,style:t}=this.props;return r.createElement(w.a,{style:t},this._renderImageGroup(e.length))}_renderImageGroup(e){switch(e){case 1:return this._renderGroupOf1();case 2:return this._renderGroupOf2();case 3:return this._renderGroupOf3();case 4:return this._renderGroupOf4();default:return null}}_renderGroupOf1(){const{media:e}=this.props,t=e&&!!e[0].mediaFile,{width:s,height:a}=e&&!t&&e[0].externalMediaDetails||{};return r.createElement(nt.a,{ratio:t?S.a.theme.aspectRatios.landscape:s/a},r.createElement(w.a,{style:rt.mediaPreviewWrapper},this._renderMediaAtIndex(0)))}_renderGroupOf2(){return r.createElement(nt.a,{ratio:S.a.theme.aspectRatios.landscape},r.createElement(w.a,{style:rt.mediaPreviewWrapper},this._renderMediaAtIndex(0,rt.gutterRight),this._renderMediaAtIndex(1)))}_renderGroupOf3(){return r.createElement(nt.a,{ratio:S.a.theme.aspectRatios.landscape},r.createElement(w.a,{style:rt.mediaPreviewWrapper},this._renderMediaAtIndex(0,rt.gutterRight),this._renderColumnWithIndices([1,2])))}_renderGroupOf4(){return r.createElement(nt.a,{ratio:S.a.theme.aspectRatios.landscape},r.createElement(w.a,{style:rt.mediaPreviewWrapper},this._renderColumnWithIndices([0,2],rt.gutterRight),this._renderColumnWithIndices([1,3])))}_renderColumnWithIndices(e,t){return r.createElement(w.a,{style:[rt.column,t]},this._renderMediaAtIndex(e[0],rt.gutterBottom),this._renderMediaAtIndex(e[1]))}_renderMediaAtIndex(e,t){const{media:s,mediaMetadata:a,editable:i,isActive:n,onClickMedia:o,onEditMedia:l,onRemoveMedia:d,onSetMediaPreviewRef:c}=this.props,h=s[e],p=h.id.toString(),u=a&&a[p]&&a[p].altText,m=a&&a[p]&&a[p].defaultAltText;return r.createElement(it.a,{accessibilityLabel:u||m,accessibilityRole:"group",enableGif:n,key:h.id,mediaItem:h,onClick:o?o(h.id):void 0,onEdit:l?l(h.id):void 0,onRemove:d(h.id),ref:c,style:[rt.mediaContainer,t],withAltTextLabel:!!u,withCloseButton:i&&n,withEditButton:l&&i&&n})}}const rt=S.a.create((e=>({column:{flexDirection:"column",flexGrow:1,flexBasis:0},gutterRight:{marginRight:e.spaces.space12},gutterBottom:{marginBottom:e.spaces.space12},mediaContainer:{borderRadius:e.borderRadii.xLarge,transitionProperty:"width",transitionDuration:"0.1s",transitionTimingFunction:"ease-out",overflow:"hidden",flexGrow:1,flexBasis:0},mediaPreviewWrapper:{flexDirection:"row",height:"100%"}})));var lt=s("S1qy"),dt=s.n(lt),ct=s("cjAp"),ht=s.n(ct);const pt=I.a.f0afcc0e,ut=I.a.ha5e2e79,mt=I.a.a3de3b68,gt=I.a.cc2b28fc,_t=I.a.g45af04e,yt=I.a.ee9c4013,bt=I.a.af40a8ef,Ct=I.a.e68b09b4,ft=I.a.ec10ee02,wt=I.a.h735a98d,Tt=I.a.j499fbcb,vt=I.a.b7d8e3f0,xt=I.a.d1175c78,St=I.a.e349147b,Et=I.a.e3a24e4b,It=I.a.de4669e2,Rt=I.a.d2c7a41c,kt=I.a.f7364fa1,At=I.a.j6304a5d,Mt=["ja","zh-cn","zh-tw","ko"],Bt=I.a.ia24dc8c,Dt=r.createElement(Xe.a,null),Ot=r.createElement(ue.a,null),Lt=r.createElement(Ye.a,null),Pt=r.createElement(Je.a,null);class Ft extends r.Component{constructor(e,t){super(e,t),o()(this,"_handleConversationControlsValueChange",(e=>{this.props.updateConversationControlsValue(e),this.props.updateCommunityValue(void 0)})),o()(this,"_handleCommunityValueChange",(e=>{this.props.updateCommunityValue(e),e?this.props.updateConversationControlsValue("community_members"):this.props.updateConversationControlsValue("all")})),o()(this,"_triggerConversationControlsImpression",Object(at.a)((()=>this.context.featureSwitches.isTrue("conversation_controls_limited_replies_creation_enabled")))),o()(this,"_renderConversationControls",(e=>{const{isFocused:t}=this.state,{conversationControlsValue:s,isActive:a,isInline:i,isReply:n}=this.props;if(n||!t&&i||this._triggerConversationControlsImpression(),!this._conversationControlsCreationEnabled)return null;const o=a&&!n&&(!i||(t||e)),l=!o&&!i&&!n;return l||o?r.createElement(N.b,{disabled:this._isScheduled(),hidden:l,onChange:this._handleConversationControlsValueChange,value:s}):null})),o()(this,"_renderFlexibleParticipationEducation",(e=>{const{isFocused:t,hasMentions:s}=this.state,{isInline:a,isReply:i,withFlexibleParticipation:n,typeaheadActive:o}=this.props,l=t||e,d=this._hasCompletedMentions||s&&!o;return n&&(d&&i&&(!a||l))&&this.context.featureSwitches.isTrue("conversation_controls_flexible_participation_reply_enabled")?r.createElement(W.a,{Icon:Qe.a,text:At}):null})),o()(this,"_renderMainContent",(()=>{const{additionalToolbarContent:e,autoFocus:t,data:s,editable:a,index:i,isActive:n,isExpanded:o,isInline:l,isInlineReply:d,isLast:c,keyCommandHandlers:h,onFilesAdded:p,onTextInputBlur:u,onTypeaheadStateChange:m,positionCursorAtBeginning:g,richTextInputContext:_}=this.props,{cardUrl:y,media:b,pollActive:C,quotedStatus:f,text:T}=s,v=Object(qe.b)(T)||y&&!Object(G.a)(y)&&[y],x=!!b.length||C||!!f,S=0===i&&c,E=this.props.typeaheadWrapper,I=!!_,{element:R,sendTweetCommandName:k,dismissComposerCommandName:A}=_||{},M=_?{dismissComposerCommandName:A,editorState:this.state.editorState,element:R,sendTweetCommandName:k}:void 0,B=d&&!_&&!o;return r.createElement(w.a,{style:Ae.textInputArea},r.createElement(w.a,{style:o?Ae.inputStyle:Ae.collapsedInputStyle},this._renderCommunitiesControls(),r.createElement(E,{contextText:T,isInline:l,onTextUpdated:this._handleTextChange,onTypeaheadStateChange:m},(e=>r.createElement(Ne.a,{appTextSize:"large",ariaLabel:mt,autoFocus:t||n&&!l,closeButton:n&&(this._deleteNonemptyTweetstormComposerEnabled||this._isEmpty())&&!S?this._renderCloseButton():void 0,contentBelow:this._renderTweetAttachment(),editable:a,inputStyle:[Ae.textInputStyle,B&&Ae.textInputMobileCollapsed],keyCommandHandlers:h,maxNumberOfLines:I?30:10,multiline:!0,numberOfLines:this._calcNumberOfLines(),onBlur:u,onChange:this._getHandleChange(e),onFilesAdded:p,placeholder:this._getPlaceHolderText(),positionCursorAtBeginning:g,positionCursorAtEnd:!g,ref:this._setTextInputRef,richTextInputContext:M,styleType:"selection",testID:`${Le}${i}`,value:T}))),v&&!x?r.createElement(qe.a,{index:i,isCardPreviewTombstoned:Object(G.a)(y),urls:v}):null),o?null:e)})),o()(this,"_renderCommunitiesControls",(()=>{const{index:e,isInline:t,isReply:s,selectedCommunityId:a}=this.props,i=this.context.featureSwitches.isTrue("c9s_enabled");return t||s||0!==e||!i?null:r.createElement(F,{onCommunityValueChange:this._handleCommunityValueChange,selectedCommunityId:a})})),o()(this,"_calcNumberOfLines",(()=>{const{richTextInputContext:e,isInline:t,data:s}=this.props,a=!!e,{media:i,pollActive:n,quotedStatus:o}=s,r=!!i.length||!!n||!!o;return a&&(t||r)?1:4})),o()(this,"_renderScheduledTweetLegend",(()=>{const{scheduledFor:e}=this.props;return r.createElement(Re.a,{onPress:this._handlePressScheduledTweetLegend,scheduledFor:e})})),o()(this,"_handlePressScheduledTweetLegend",(()=>{const{history:e,analytics:t,setActiveParentKey:s}=this.props;e.push("/compose/tweet/schedule"),t.scribe({element:"tweet_legend",action:"click"}),s()})),o()(this,"_renderEmojiPicker",(()=>r.createElement(j.a,{onEmojiSelect:this._handleInsertEmoji,size:"normal",style:this._getEmojiPickerButtonStyles(),textInputRef:this._textInputRef||void 0}))),o()(this,"_getEmojiPickerButtonStyles",Object(at.a)((()=>[Ae.iconEmojiPicker,Ae.toolBarButton]))),o()(this,"_isSchedulingDisabled",(()=>{const{conversationControlsValue:e,index:t,isLast:s,data:{pollActive:a,quotedStatus:i,text:n,media:o,mediaTags:r}}=this.props,l=0===t&&s,d=e!==H.a.all;return Boolean(a||!l||i&&""===n&&!o.length||d||r.length>0)})),o()(this,"_renderSchedulingButton",(()=>r.createElement(D.a,{accessibilityLabel:ut,disabled:this._isSchedulingDisabled(),hoverLabel:{label:wt},icon:Pt,onClick:this._handleClickScheduler,size:"normal",style:Ae.toolBarButton,testID:Fe,type:"text"}))),o()(this,"_handleClickScheduler",(()=>{const{analytics:e,history:t,setActiveParentKey:s}=this.props;t.push("/compose/tweet/schedule"),e.scribe({element:"schedule_tweet",action:"click"}),s()})),o()(this,"_renderCloseButton",(()=>{const{onRemoveComposer:e}=this.props;return r.createElement(D.a,{accessibilityLabel:yt,hoverLabel:{label:Ct},icon:Dt,onPress:e,size:"small",type:"text"})})),o()(this,"_renderTweetAttachment",(()=>{const{data:e,editable:t,isActive:s}=this.props,{media:a,mediaMetadata:i,pollActive:n,initialPollChoices:o,initialPollDuration:l,quotedStatus:d}=e;return 0!==a.length||n||d?r.createElement(w.a,{onClick:this._handleFocus,style:[Ae.attachmentContainer,Ae.tweetAttachmentArea],testID:De},a.length>0?r.createElement(ot,{editable:t,isActive:s,media:a,mediaMetadata:i,onClickMedia:this.hasAttachedImage?this._handleClickMediaDetail:void 0,onEditMedia:this.hasAttachedImage?this._handleClickMediaDetail:void 0,onRemoveMedia:this._handleMediaRemoveFactory,onSetMediaPreviewRef:this._handleSetMediaPreviewRef,style:Ae.mediaPreview}):null,s?this._renderMediaActions():null,n?r.createElement(Se,{editable:t,initialChoices:o,initialDuration:l,isActive:s,onInvalid:this._handlePollInvalid,onRemove:this._handlePollRemove,onValid:this._handlePollValid,ref:this._setPollCreatorRef}):null,d?this._renderQuoteTweet(d):null):null})),o()(this,"_renderQuoteTweet",(e=>{const{data:{media:t}}=this.props,s=e.tombstoneInfo;return s&&s.richText?r.createElement(He.a,null,r.createElement(Ie.c,{entities:s.richText.entities,rtl:s.richText.rtl,text:s.richText.text})):r.createElement(Ee.a,{isCondensed:t.length>0,style:Ae.quoteTweet,tweetId:e.id_str,withLink:!1,withUserHoverCard:!1})})),o()(this,"_renderToolbar",(e=>{const{additionalToolbarContent:t,hidePollAndScheduling:s,isReply:a,richTextInputContext:i,isSelfThreadReply:n,isInlineReply:o}=this.props,l=!!i,d=!o&&!s;return r.createElement(w.a,{style:Ae.toolBar,testID:Pe},r.createElement(w.a,{style:Ae.toolBarIconsContainer},this._renderMediaPickerButton(),this._renderGifButton(),d?this._renderPollButton():null,l?this._renderEmojiPicker():null,d?this._renderSchedulingButton():null),r.createElement(w.a,{style:Ae.toolBarIconsContainer},e?this._renderCountdownCircle():null,a&&!n||!e?null:r.createElement(r.Fragment,null,r.createElement(w.a,{style:Ae.separator}),this._renderAddComposerButton()),t))})),o()(this,"_addOverflowStyle",(e=>{const{richTextInputContext:t}=this.props;if(!t)return;const s=e.getCurrentContent().getPlainText(),a=s.length,i=this._getParsedTweet(s).validRangeEnd,n=i+1<a;if(this.state.hasOverflowStyle||n){const s=n?i+1:-1;return{editorState:t.updateOverflowStyle&&t.updateOverflowStyle(e,s,this.state.hasOverflowStyle),hasOverflowStyle:n}}return{editorState:e,hasOverflowStyle:n}})),o()(this,"_getHandleChange",Object(at.a)((e=>t=>{e(t),this._handleTextChange(t)}))),o()(this,"_handleTextChange",(e=>{const{data:{key:t,text:s},onTextChange:a,richTextInputContext:i}=this.props;let n;if(i){n=e.getCurrentContent().getPlainText();const t=i.convertEmojiToEntities(e);this.setState(this._addOverflowStyle(t))}else n=je.a.replaceCarriageReturns(e.target.value);this._hasCompletedMentions=c.d(n,!0);const o=c.d(n);this.setState({hasMentions:o}),s!==n&&a(n,t)})),o()(this,"_handleClickAltTextShortcut",(()=>{const{analytics:e}=this.props;e.scribe({element:"alt_text_button",action:"click"})})),o()(this,"_handleClickMediaDetail",(e=>()=>{const{analytics:t,history:s}=this.props;t.scribe({element:"media_detail_button",action:"click"}),this.hasAttachedImage&&s.push("/compose/tweet/media",{mediaId:e,tab:"crop"})})),o()(this,"_handleDragDrop",(e=>{const{addToast:t,data:{pollActive:s},onFilesAdded:a}=this.props;s?t({text:gt}):a(e)})),o()(this,"_handleMediaRemoveFactory",(e=>()=>{this.props.onRemoveMedia(this.props.index,e)})),o()(this,"_handleInsertEmoji",(e=>{const{editorState:t}=this.state,{richTextInputContext:s}=this.props;if(!s)return;const a=s.insertTextAtCursor(t,e.text);this._handleTextChange(a)})),o()(this,"_validateMedia",(e=>{const{data:{media:t}}=this.props;return c.c(t.concat(e))})),o()(this,"_handlePollAdd",(()=>{const{analytics:e,index:t,updateSingleComposer:s}=this.props;e.scribe({element:"add_poll",action:"click"}),s({pollActive:!0},t)})),o()(this,"_handlePollRemove",(()=>{const{analytics:e,index:t,updateSingleComposer:s}=this.props;e.scribe({element:"remove_poll",action:"click"}),s({pollActive:!1},t)})),o()(this,"_handlePollInvalid",(()=>{const{data:{pollValid:e},index:t,updateSingleComposer:s}=this.props;e&&s({pollValid:!1},t)})),o()(this,"_handlePollValid",(()=>{const{data:{pollValid:e},index:t,updateSingleComposer:s}=this.props;!e&&s({pollValid:!0},t)})),o()(this,"_handleFocus",(()=>{const{isActive:e,index:t,onFocus:s,setActiveParentKey:a}=this.props;a(),e||(window.requestAnimationFrame((()=>{this._mediaPreviewRef&&this._mediaPreviewRef._playVideo()})),s(t))})),o()(this,"_handleEditorFocus",(()=>this.setState({isFocused:!0}))),o()(this,"_formatCountdownNumber",(e=>Bt(Math.ceil(e/this._userLanguageWeight)))),o()(this,"_getPlaceHolderText",(()=>{const{data:{quotedStatus:e,pollActive:t},isReply:s,isSelfThreadReply:a,index:i}=this.props;return e?It:t?kt:s&&!a?Rt:a||i>0?Et:St})),o()(this,"_getNumberOfAltTextEntries",(()=>{const{data:{mediaMetadata:e,media:t}}=this.props;return t.reduce(((t,s)=>{var a;return e&&!Object(C.a)(null==(a=e[s.id.toString()])?void 0:a.altText)?t+1:t}),0)})),o()(this,"_getParsedTweet",Object(at.a)((e=>{const t=ht.a[this.props.twitterTextConfigurationVersion];return dt()(e,t)}))),o()(this,"_isEmpty",(()=>{const{data:e}=this.props;return Object($.b)(e)})),o()(this,"_isScheduled",(()=>{const{data:{scheduledFor:e}}=this.props;return Object(q.h)(e)})),o()(this,"_setPollCreatorRef",(e=>{this._pollCreatorRef=e})),o()(this,"_handleSetMediaPreviewRef",(e=>{this._mediaPreviewRef=e})),o()(this,"_setTextInputRef",(e=>{this._textInputRef=e}));const{richTextInputContext:s,userLanguage:a,data:{text:i}}=e,{initEditorState:n}=s||{};this._conversationControlsCreationEnabled=!0===this.context.featureSwitches.getValueWithoutScribeImpression("conversation_controls_limited_replies_creation_enabled"),this._deleteNonemptyTweetstormComposerEnabled=this.context.featureSwitches.isTrue("responsive_web_delete_nonempty_tweetstorm_composer_enabled"),this._userLanguageWeight=a&&Mt.indexOf(a)>-1?2:1,this._hasCompletedMentions=c.d(i,!0),this.state={editorState:n&&n(i),hasOverflowStyle:!1,isFocused:!1,hasMentions:c.d(i)}}componentDidUpdate(e){(this.hasExternalMedia||this.props.data.media.some((e=>e.mediaFile&&!(e.mediaFile instanceof K.a)&&e.mediaFile.isVideo)))&&e.isActive&&!this.props.isActive&&this._mediaPreviewRef&&this._mediaPreviewRef._pauseVideo()}focus(){this._textInputRef&&this._textInputRef.focus()}render(){const{isActive:e,isExpanded:t,isInline:s,isLast:a,loggedInUser:i,withAvatar:n}=this.props,o=!this._isEmpty();return r.createElement(w.a,{onFocus:this._handleFocus,style:[Ae.root,!e&&Ae.blurStyle]},r.createElement(Ve.a,{avatarCell:r.createElement(r.Fragment,null,n?r.createElement(Ue.a.Consumer,null,(({avatarSize:e})=>r.createElement(ze.default,{accessibilityLabel:i?i.name:void 0,screenName:i?i.screen_name:void 0,size:e,style:Ae.avatar,uri:i?i.profile_image_url_https:void 0,withLink:s}))):null,a?null:r.createElement(w.a,{style:[Ae.conversationLine,!n&&Ae.conversationLineWithOverflow]})),avatarCellStyle:t?Ae.avatarContainerExpanded:Ae.avatarContainer,cellStyle:Ae.rightColumn},this._renderScheduledTweetLegend(),r.createElement(w.a,{onFocus:this._handleEditorFocus,style:Ae.inputArea},r.createElement(We.a,{allowDragDrop:!this.mediaAttachDisabled,onDragEnter:this._handleFocus,onFilesAdded:this._handleDragDrop,style:Ae.dragDrop},(e=>r.createElement(r.Fragment,null,r.createElement(w.a,{style:[Ae.composeBoxContainer]},this._renderMainContent()))))),this._renderConversationControls(o),this._renderFlexibleParticipationEducation(o),r.createElement(Ke.b,{show:e&&t},this._renderToolbar(o))))}_renderMediaPickerButton(){const{data:{media:e},onFilesAdded:t,setActiveParentKey:s}=this.props,a=this.mediaAttachDisabled,i=e.length<3;return r.createElement(X.a,{acceptGifs:0===e.length,disabled:a,multiple:i,onChange:t,onPress:s,style:[Ae.toolBarButton,Ae.firstToolBarButton],type:"text"})}_renderGifButton(){const{data:{media:e,pollActive:t},history:s,loggedInUser:a,setActiveParentKey:i}=this.props,n=t||e.length||!a;return r.createElement(U.a,{enabled:!n,gifSearchKeySource:z.a.Composition,history:s,onPress:i})}_renderPollButton(){const{data:{media:e,pollActive:t,quotedStatus:s},loggedInUser:a}=this.props,i=this._isScheduled(),n=!(!(t||e.length||s||i)&&a);return r.createElement(D.a,{accessibilityLabel:pt,disabled:n,hoverLabel:{label:ft},icon:Lt,onPress:this._handlePollAdd,size:"normal",style:Ae.toolBarButton,type:"text"})}_renderMediaActions(){const{data:{gifMetadata:e,media:t,mediaTags:s}}=this.props,a=0!==s.length,i=t.some((e=>e.mediaFile&&e.mediaFile.isGif))||this.hasExternalMedia;return this.hasAttachedImage||e||i?r.createElement(w.a,{style:Ae.imageActions},e&&e.url&&e.provider?r.createElement(w.a,{style:Ae.addImageTextPadding},r.createElement(V.a,{gifUrl:e.url,provider:e.provider})):null,this.hasAttachedImage&&!this._isScheduled()?r.createElement(v.c,{accessibilityLabel:xt,color:"gray600",link:"/compose/tweet/tags",style:[Ae.addImageTextContainer,Ae.addImageTextPadding]},a?this._renderTaggedUsers():this._renderTagPeopleLabel()):null,this.hasAttachedImage||i?r.createElement(v.c,{accessibilityLabel:Tt({numberOfImages:t.length}),color:"gray600",link:{pathname:"/compose/tweet/media",state:{mediaId:t[0].id,tab:"alt_text"}},onPress:this._handleClickAltTextShortcut,style:Ae.addImageTextContainer},this._renderAltTextLabel()):null):null}_renderTagPeopleLabel(){return r.createElement(v.c,{color:"gray600",size:"small"},r.createElement(Ze.a,{style:Ae.addImageActionIcon}),xt)}_renderTaggedUsers(){const{data:{mediaTags:e},loggedInUser:t}=this.props,s=e.map((e=>({name:e.data.name,screen_name:e.data.screen_name,type:e.type,user_id:e.data.id_str})));return r.createElement(v.c,{color:"gray600",size:"small",testID:Oe},r.createElement(et.a,{style:Ae.addImageActionIcon}),r.createElement(Ge.a,{loggedInUserId:null==t?void 0:t.id_str,users:s}))}_renderAltTextLabel(){const{data:{media:e,mediaMetadata:t}}=this.props;return this.hasAttachedAltText?e.length>1?r.createElement(v.c,{color:"gray600",size:"small",testID:Be},r.createElement(st.a,{style:Ae.addImageActionIcon}),vt({numberOfAltTextEntries:this._getNumberOfAltTextEntries()})):r.createElement(v.c,{color:"gray600",numberOfLines:1,size:"small",testID:Be},r.createElement(st.a,{style:Ae.addImageActionIcon}),t&&t[e[0].id.toString()]&&t[e[0].id.toString()].altText):r.createElement(v.c,{color:"gray600",size:"small",testID:Be},r.createElement(tt.a,{style:Ae.addImageActionIcon}),Tt({numberOfImages:e.length}))}_renderCountdownCircle(){const{data:{text:e},twitterTextConfigurationVersion:t}=this.props,s=ht.a[t],a=this._getParsedTweet(e).weightedLength;return r.createElement($e.a,{count:a,formatNumber:this._formatCountdownNumber,maxCount:s.maxWeightedTweetLength,warningCount:260})}_renderAddComposerButton(){const{disableAddTweet:e,loggedInUser:t,isInline:s,onAddComposer:a}=this.props,i=this._isEmpty(),n=this._isScheduled(),o=e||i||n||!t;return r.createElement(D.a,{accessibilityLabel:_t,disabled:o,hoverLabel:{label:bt},icon:Ot,link:!s||i||o?void 0:"/compose/tweet",onPress:a,size:"small",testID:Me,type:"secondary"})}get pollChoices(){const{data:{pollActive:e}}=this.props;return e&&this._pollCreatorRef?this._pollCreatorRef.choices:void 0}get pollDuration(){const{data:{pollActive:e}}=this.props;return e&&this._pollCreatorRef?this._pollCreatorRef.duration:void 0}get mediaAttachDisabled(){const{data:{media:e,pollActive:t},loggedInUser:s}=this.props,a=e.length,i=e.some((e=>{var t;return null==(t=e.mediaFile)?void 0:t.isGif})),n=e.some((e=>e.mediaFile&&!(e.mediaFile instanceof K.a)&&e.mediaFile.isVideo));return 4===a||i||n||t||this.hasExternalMedia||!s}get hasAttachedImage(){const{data:{media:e}}=this.props;return e.some((e=>{var t;return null==(t=e.mediaFile)?void 0:t.isImage}))}get hasAttachedAltText(){return this._getNumberOfAltTextEntries()>0}get hasExternalMedia(){const{data:{media:e}}=this.props;return e.some((e=>!!e.externalMediaDetails))}}o()(Ft,"contextType",l.a),o()(Ft,"defaultProps",{twitterTextConfigurationVersion:"defaults",withAvatar:!0,conversationControlsValue:"all",updateConversationControlsValue:()=>{}});var Ht=Object(me.a)(Ft),Nt=s("fs1G"),jt=s("SrIh"),Vt=s("BLtI"),Ut=s("kY28");const zt=({children:e})=>r.createElement(v.c,{color:"link"},e),Wt=e=>`@${e}`,Kt=S.a.create((e=>({replyUsersContainer:{flexDirection:"row",minHeight:e.spaces.space12,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:0},grid:{flexGrow:1,flexShrink:1},repliesTextContainer:{flexGrow:1},repliesMessage:{flexGrow:1,paddingBottom:e.spaces.space16,paddingTop:e.spaces.space4},conversationLineContainer:{alignItems:"center"},conversationLine:{backgroundColor:e.colors.gray200,flexGrow:1,minHeight:0,width:e.componentDimensions.conversationLineWidth,marginBottom:e.spaces.space4}})));var Gt=({communityName:e,excludedRecipients:t,inReplyToStatus:s,loggedInUserId:a,onPress:i,shouldDisplayRepliesText:n,showParentTweet:o=!0})=>{const l=r.useMemo((()=>c.a({inReplyToStatus:s,loggedInUserId:a}).filter((({id_str:e})=>t.indexOf(e)<0))),[t,s,a]),d=r.useMemo((()=>{const{user:e}=s.retweeted_status||s;switch(l.length){case 0:return Object(jt.a)("Compose reply context should not have 0 recipients"),null;case 1:return r.createElement(I.a.I18NFormatMessage,{$i18n:"e34022a7"},r.createElement(zt,null,I.a.b50e199a({userName:Wt(e.screen_name)})));case 2:{const t=l.find((({id_str:t})=>t!==e.id_str))||{};return r.createElement(I.a.I18NFormatMessage,{$i18n:"bfd9c99a"},r.createElement(zt,null,I.a.f2e4dd37({replyUserName:Wt(e.screen_name),otherUserName:Wt(t.screen_name)})))}case 3:{const[t,s]=l.filter((({id_str:t})=>t!==e.id_str));return r.createElement(I.a.I18NFormatMessage,{$i18n:"g7a1000e"},r.createElement(zt,null,I.a.eccfddc3({userOneName:Wt(e.screen_name),userTwoName:Wt(t.screen_name),userThreeName:Wt(s.screen_name)})))}default:{const t=l.find((({id_str:t})=>t!==e.id_str))||{};return r.createElement(I.a.I18NFormatMessage,{$i18n:"i558c201"},r.createElement(zt,null,I.a.h758cd22({userOneName:Wt(e.screen_name),userTwoName:Wt(t.screen_name),othersCount:l.length-2})))}}}),[s,l]);function h(e){e&&e.preventDefault&&e.preventDefault()}return r.createElement(w.a,null,o?r.createElement(Vt.b,{conversationPosition:{isStart:!0},linkableQuotedTweet:!1,linkify:!1,onAnalyticsClick:Nt.a,onAvatarClick:h,onEntityClick:h,onMediaClick:h,onReplyContextClick:h,replyContext:Ut.a.ReplyContextTypes.None,tweet:s,withAvatarLink:!1,withCardLinks:!0,withInlineMedia:!1,withQuotedTweetLinks:!0,withSocialContext:!1,withTimestampLink:!1,withUserHoverCard:!1}):null,r.createElement(w.a,{style:Kt.replyUsersContainer},r.createElement(Ve.a,{avatarCell:o?r.createElement(w.a,{style:Kt.conversationLine}):null,avatarCellStyle:Kt.conversationLineContainer,cellStyle:Kt.repliesTextContainer,style:Kt.grid},n?r.createElement(v.c,{accessibilityRole:"button",color:"gray600",onPress:i,style:o&&Kt.repliesMessage},d,e?(e=>` in ${e}`)(e):null):null)))},$t=s("Tb0w"),qt=s("ge3j"),Xt=s("1YZw"),Yt=s("pidX"),Jt=s("zhf3"),Qt=s("P1r1"),Zt=s("RqPI"),es=s("XOJV"),ts=s("G6rE"),ss=s("AspN"),as=s("oEGd"),is=s("hqKg");const ns=e=>e.parentTweetId||(e.isInline?Jt.a.homeTimeline:Jt.a.modal),os=e=>(t,s)=>{const a=((e,t)=>t.location.state)(0,s);return a?e(a):void 0},rs=Object(is.createSelector)(((e,t)=>t.activeUser),ts.e.selectLoggedInUser,((e,t)=>e||t)),ls=(e,t)=>t.parentTweetId||ds(e,t)||cs(e,t),ds=(e,t)=>{const{location:{query:s}}=t;return s&&"string"==typeof s.in_reply_to?s.in_reply_to:void 0},cs=os((e=>e.inReplyToStatusId)),hs=(e,t)=>{const s=ls(e,t);return s?es.a.selectHydrated(e,s):void 0},ps=(e,t)=>t.location.pathname.indexOf("/intent/")>-1,us=os((e=>e.hasArticleNudge)),ms=os((e=>e.selectedCommunityId)),gs=os((e=>e.convoCardData)),_s=os((e=>e.externalMedia)),ys=os((e=>e.externalMediaFiles)),bs=os((e=>e.defaultText)),Cs=(e,t)=>{const s=bs(e,t),a=Object(Yt.a)(t.location);return(ps(0,t)||((e,t)=>t.location.pathname.indexOf("/compose/tweet")>-1)(0,t))&&a?a:s},fs=os((e=>e.quotedStatusId)),ws=os((e=>e.quotedStatus)),Ts=os((e=>e.isSelfThreadReply)),vs=os((e=>e.positionCursorAtBeginning)),xs=os((e=>e.promotedContent)),Ss=({mediaIds:e,...t})=>t,Es=Object(is.createSelector)(((e,t)=>{const s=ns(t);return qt.m(e,s)}),Cs,((e,t)=>((e,t)=>t.quotedStatus?t.quotedStatus:ws(e,t))(e,t)||((e,t)=>{const s=fs(e,t);return s?es.a.selectHydratedMemoized(e,s):void 0})(e,t)),ss.g,((e,t,s,a)=>e.map(((e,i)=>({...Ss(e),media:a.filter((t=>e.mediaIds.some((e=>e===t.id)))),quotedStatus:0===i?s:void 0,text:0===i&&t?t:e.text}))))),Is=Object(is.createStructuredSelector)({activeComposerIndex:(e,t)=>{const s=ns(t);return qt.k(e,s)},activeUser:rs,composerData:Es,conversationControlsValue:(e,t)=>{const s=ns(t);return ms(e,t)?H.a.community_members:qt.n(e,s)},dataSaverMode:Qt.j,excludedRecipients:(e,t)=>{const s=ns(t);return qt.o(e,s)},externalMedia:_s,externalMediaFiles:ys,hasArticleNudge:us,inReplyToStatus:hs,inReplyToStatusId:ls,isIntentRoute:ps,isSelfThreadReply:Ts,isSending:(e,t)=>{const s=ns(t);return qt.p(e,s)},positionCursorAtBeginning:vs,loggedInUser:ts.e.selectLoggedInUser,prepopulatedText:Cs,promotedContent:xs,scheduledFor:qt.q,selectedCommunityId:(e,t)=>{const s=ns(t),a=ms(e,t);return qt.l(e,s)||a},selectedCommunityIdFromLocationState:ms,selectedCommunityName:(e,t)=>{const s=hs(e,t),a=null==s?void 0:s.community_id_str,i=a?u.a.select(e,a):void 0;return i?i.name:void 0},sendingProgress:qt.r,convoCardData:gs,userLanguage:Zt.f,quotedStatusId:fs}),Rs={addComposer:qt.a,addToast:Xt.b,createLocalApiErrorHandler:Object(p.d)("SCREEN_COMPOSE_V2"),createNudge:qt.d,fetchTweetIfNeeded:es.a.fetchOneIfNeeded,removeComposer:qt.h,resetDraft:qt.i,retweet:es.a.retweet,recordNudgeAction:qt.f,recordNudgeResult:qt.g,schedule:qt.j,draftTweet:qt.e,send:qt.s,updateActiveComposerIndex:qt.u,updateConvoCardState:$t.b,updateConversationControlsValue:qt.w,updateCommunityValue:qt.v,uploadMedia:ss.l,addMedia:ss.b,processMultipleMedia:ss.d,removeMediaUpload:ss.f,updateSingleComposer:qt.y,setActiveParentKey:qt.t,copyDataFromInlineComposerToModalComposer:qt.b,copyDataFromInlineReplyComposerToModalComposer:qt.c};var ks=Object(as.g)(Is,Rs),As=s("45mF"),Ms=s("c0ZR"),Bs=s("W5XZ"),Ds=s("MXY2"),Os=s("I8M8"),Ls=s("eyty"),Ps=s("gUG0"),Fs=s("ymux"),Hs=s("VjLy"),Ns=s("95Se"),js=s("xKuM");const Vs=I.a.cd33a61c,Us=I.a.g97558f6,zs=I.a.cd80d930,Ws=I.a.b0476eb2,Ks=I.a.j24c37b2;class Gs extends r.Component{constructor(...e){super(...e),o()(this,"_handleHideMoreInfo",(()=>{const{hideEducation:e}=this.props;e()}))}render(){const{isSmallBreakPoint:e}=this.props;return r.createElement(Ke.b,{animateMount:!0,duration:"longer",show:!0,type:"fade"},r.createElement(w.a,{style:$s.moreInfoContainer},r.createElement(js.a,{leftControl:r.createElement(D.a,{icon:r.createElement(Ns.a,{onClick:this._handleHideMoreInfo}),pullLeft:!0,type:"text"}),style:$s.moreInfoAppBar,title:"More Info"}),r.createElement(w.a,{style:$s.moreInfoContentContainer},r.createElement(v.c,{color:"normal",size:"large",style:$s.headlineText,weight:"bold"},Vs),r.createElement(v.c,{color:"gray600",style:$s.moreInfoFirstDescription},zs),r.createElement(v.c,{color:"normal",size:"large",style:$s.headlineText,weight:"bold"},Us),r.createElement(v.c,{color:"gray600",style:$s.moreInfoSecondDescription},Ws),e&&r.createElement(D.a,{onClick:this._handleHideMoreInfo,style:$s.confirmationButton,type:"neutral"},Ks))))}}const $s=S.a.create((e=>({headlineText:{marginBottom:e.spaces.space12},confirmationButton:{marginVertical:e.spaces.space20},moreInfoAppBar:{borderTopLeftRadius:e.borderRadii.xLarge,borderTopRightRadius:e.borderRadii.xLarge,borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small},moreInfoContainer:{borderRadius:e.borderRadii.xLarge},moreInfoContentContainer:{padding:e.spaces.space20,paddingBottom:0},moreInfoFirstDescription:{marginBottom:e.spaces.space16},moreInfoSecondDescription:{marginBottom:e.spaces.space16}})));var qs=s("euJ+"),Xs=s("1bnC"),Ys=s("Qwev"),Js=s("yrzJ"),Qs=s("eb3s"),Zs=s("sgih"),ea=s("0pUJ"),ta=s("HAhZ");const sa="hide_reply_author_education",aa=(e,t)=>Object(ta.b)(e,sa);var ia=Object(h.a)().propsFromState((()=>({shouldShowHideReplyTip:aa}))).propsFromActions((({conversationModule:e={}})=>({addTip:ta.a,addToast:Xt.b,block:ts.e.block,createLocalApiErrorHandler:Object(p.d)("NUDGE"),hideReply:es.a.hideReply,mute:ea.a,recordNudgeAction:qt.f,recordNudgeResult:qt.g,unblock:ts.e.unblock,unmute:ts.e.unmute,updateDismissCause:e&&e.updateDismissCause}))),na=s("P2xQ");const oa=Object.freeze({ReviseOrMute:"ReviseOrMute",ReviseOrBlock:"ReviseOrBlock",ReviseOrHideThenBlock:"ReviseOrHideThenBlock"}),ra=Object.freeze({BlockUser:"BlockUser",CancelOnBlockUserPrompt:"CancelOnBlockUserPrompt",CancelTweet:"CancelTweet",CloseApp:"CloseApp",HideReply:"HideReply",MuteUser:"MuteUser",NudgeNotShown:"NudgeNotShown",ReviseTweet:"ReviseTweet",SendTweet:"SendTweet"}),la=Object.freeze({BlockUser:"BlockUser",CancelComposer:"CancelComposer",CloseApp:"CloseApp",HideReply:"HideReply",MuteUser:"MuteUser",SaveTweetToDrafts:"SaveTweetToDrafts",SentTweet:"SentTweet",TweetSentWithoutShowingNudge:"TweetSentWithoutShowingNudge"}),da=I.a.ic011119,ca=I.a.f6b7745a,ha=I.a.a75cc0f8,pa=I.a.a6450e83,ua=I.a.a9fd20be,ma=I.a.i2b9632d,ga=I.a.e133be4e,_a=I.a.ge5067bb,ya=I.a.ea626ab3,ba=I.a.i62a03aa,Ca=I.a.h3032750,fa=I.a.af250eb6,wa=I.a.ib147a39,Ta=I.a.e8ff17e5,va=I.a.e3275464;class xa extends r.Component{constructor(...e){super(...e),o()(this,"_isNudgeEducationEnabled",this.context.featureSwitches.isTrue("responsive_web_second_degree_replies_nudge_education_enabled")),o()(this,"state",{loadingSecondaryButton:!1,showMoreInfo:!1}),o()(this,"_renderInnerBody",(()=>{const{loadingSecondaryButton:e}=this.state;return r.createElement(r.Fragment,null,r.createElement(v.c,{align:"center",color:"normal",size:"large",style:Sa.headlineText,weight:"bold"},this._getHeadline()),r.createElement(v.c,{align:"center",color:"gray600"},this._getDescription()),r.createElement(v.c,{align:"center",color:"link",onClick:this._handleMoreInfo,style:Sa.moreInfoButton},Ca),r.createElement(w.a,{style:Sa.buttons},r.createElement(D.a,{onPress:this._handleRevise,style:Sa.button,type:"secondary"},Ta),r.createElement(D.a,{onPress:this._handleSecondaryAction,style:Sa.button,type:"secondary"},e?this._renderSpinner():this._getSecondaryActionLabel()),r.createElement(D.a,{onPress:this._handleSend,style:Sa.button,type:"secondary"},va)))})),o()(this,"_renderSpinner",(()=>{const{nudgeType:e}=this.props,t=e===oa.ReviseOrMute?na.g:e===oa.ReviseOrBlock?fa:wa;return r.createElement(Ys.a,{accessibilityLabel:t,style:Sa.spinner})})),o()(this,"_renderBlockSheet",(()=>{const{recipient:{screen_name:e}}=this.props,t=r.createElement(Js.a,{color:"normal",screenName:e}),s=r.createElement(Js.a,{screenName:e});return r.createElement(Qs.a,{cancelButtonLabel:ba,confirmButtonLabel:pa,confirmButtonType:"destructive",headline:r.createElement(I.a.I18NFormatMessage,{$i18n:"ja6527ba"},t),onCancel:this._handleBlockCancel,onConfirm:this._handleBlockUser,text:r.createElement(I.a.I18NFormatMessage,{$i18n:"a899eb22"},s)})})),o()(this,"_getDescription",(()=>{const{nudgeType:e,recipient:t}=this.props,s=r.createElement(Js.a,{screenName:t.screen_name});switch(e){case oa.ReviseOrMute:return r.createElement(I.a.I18NFormatMessage,{$i18n:"d98723c4"},s);case oa.ReviseOrBlock:return r.createElement(I.a.I18NFormatMessage,{$i18n:"fa1a3797"},s);case oa.ReviseOrHideThenBlock:return r.createElement(I.a.I18NFormatMessage,{$i18n:"fa2ffaa7"},s);default:return null}})),o()(this,"_getHeadline",(()=>{const{nudgeType:e}=this.props;switch(e){case oa.ReviseOrMute:return da;case oa.ReviseOrBlock:return ca;case oa.ReviseOrHideThenBlock:return ha;default:return null}})),o()(this,"_getSecondaryActionLabel",(()=>{const{nudgeType:e}=this.props;switch(e){case oa.ReviseOrMute:return na.f;case oa.ReviseOrBlock:return pa;case oa.ReviseOrHideThenBlock:return _a;default:return null}})),o()(this,"_handleSecondaryAction",(()=>{const{nudgeType:e}=this.props;switch(this.setState({loadingSecondaryButton:!0}),e){case oa.ReviseOrMute:this._handleMuteUser();break;case oa.ReviseOrBlock:this._handleBlockUser();break;case oa.ReviseOrHideThenBlock:this._handleHideReplyThenBlock();break;default:return}})),o()(this,"_handleSend",(()=>{const{onSend:e}=this.props;this._recordNudgeAction(ra.SendTweet),e()})),o()(this,"_handleBlockCancel",(()=>{const{onDiscard:e,showBlockModal:t}=this.props;t&&(this._recordNudgeAction(ra.CancelOnBlockUserPrompt),this._handleHideReply()),e()})),o()(this,"_handleBlockUser",(()=>{const{addToast:e,block:t,onDiscard:s,recipient:a,showBlockModal:i,unblock:n}=this.props;this._recordNudgeAction(ra.BlockUser),t(a.id_str).then((()=>{i&&this._handleHideReply(),this._recordNudgeResult(la.BlockUser),s(),e({action:{label:ga,onAction:()=>{n(a.id_str).then((()=>{e({text:ma})})).catch(this._createApiErrorHandler())}},text:ua})})).catch(this._createApiErrorHandler())})),o()(this,"_handleMuteUser",(()=>{const{addToast:e,mute:t,onDiscard:s,recipient:a,unmute:i}=this.props;this._recordNudgeAction(ra.MuteUser),t(a.id_str).then((()=>{this._recordNudgeResult(la.MuteUser),s(),e({action:{label:Xs.a,onAction:()=>{i(a.id_str).then((()=>{e({text:Object(na.d)(a.screen_name)})})).catch(this._createApiErrorHandler())}},text:Object(na.b)(a.screen_name)})})).catch(this._createApiErrorHandler())})),o()(this,"_handleHideReplyThenBlock",(()=>{const{addTip:e,shouldShowHideReplyTip:t,hidePopover:s,setShowBlockModal:a,setShowHideReplyEducation:i,showHideReplyEducation:n}=this.props;if(s(),n)i(!1);else if(t)return e({[sa]:!0}),void i(!0);a(!0)})),o()(this,"_handleHideReply",(()=>{const{addToast:e,conversationId:t,hideReply:s,inReplyToStatusId:a,updateDismissCause:i}=this.props;this._recordNudgeAction(ra.HideReply),s(a,{conversation_id:t}).then((()=>{this._recordNudgeResult(la.HideReply),i&&i({entryId:`tweet-${a}`,feedbackKeys:[qs.d]}),e({text:ya})})).catch(this._createApiErrorHandler())})),o()(this,"_handleRevise",(()=>{const{onRevise:e}=this.props;this._recordNudgeAction(ra.ReviseTweet),e()})),o()(this,"_handleCancelHideReplyEducation",(()=>{const{setShowHideReplyEducation:e}=this.props;e(!1),this._handleRevise()})),o()(this,"_handleBeforeWindowUnload",(()=>{this._recordNudgeAction(ra.CloseApp),this._recordNudgeResult(la.CloseApp)})),o()(this,"_handleMoreInfo",(()=>{this.setState({showMoreInfo:!0})})),o()(this,"_hideMoreInfo",(()=>{this.setState({showMoreInfo:!1})})),o()(this,"_recordNudgeAction",(e=>{const{nudgeId:t,recordNudgeAction:s}=this.props;s({nudgeId:t,nudgeActionType:e})})),o()(this,"_recordNudgeResult",(e=>{const{nudgeId:t,recordNudgeResult:s}=this.props;s({nudgeId:t,nudgeResultType:e})})),o()(this,"_createApiErrorHandler",(()=>this.props.createLocalApiErrorHandler({showToast:!0})))}componentDidMount(){window.addEventListener("beforeunload",this._handleBeforeWindowUnload)}componentWillUnmount(){window.removeEventListener("beforeunload",this._handleBeforeWindowUnload)}render(){const{screenWidth:e,showBlockModal:t,showHideReplyEducation:s}=this.props,{showMoreInfo:a}=this.state;if(t)return this._renderBlockSheet();if(s)return r.createElement(Hs.a,{onCancel:this._handleCancelHideReplyEducation,onConfirm:this._handleHideReplyThenBlock});const i=e<S.a.theme.breakpoints.small;return this._isNudgeEducationEnabled?i?r.createElement(Zs.a,{accessibilityRole:"alertdialog",allowBackNavigation:!1,enableMaskForDismiss:!0,onMaskClick:this._handleRevise,style:[Sa.container,Sa.smallBreakPointContainer,a&&Sa.noPadding],type:"bottom",withMask:!0},a?r.createElement(Gs,{hideEducation:this._hideMoreInfo,isSmallBreakPoint:!0}):this._renderInnerBody()):r.createElement(r.Fragment,null,a&&r.createElement(Gs,{hideEducation:this._hideMoreInfo}),r.createElement(w.a,{style:Sa.container},!a&&this._renderInnerBody())):r.createElement(Zs.a,{accessibilityRole:"alertdialog",allowBackNavigation:!1,enableMaskForDismiss:!0,onMaskClick:this._handleRevise,style:Sa.container,type:"center",withMask:!0},this._renderInnerBody())}}o()(xa,"contextType",l.a);const Sa=S.a.create((e=>({container:{alignItems:"center",backgroundColor:e.colors.cellBackground,borderRadius:e.borderRadii.xLarge,padding:e.spaces.space20,paddingBottom:e.spaces.space12},smallBreakPointContainer:{borderRadius:e.borderRadii.none},noPadding:{padding:0},headlineText:{marginBottom:e.spaces.space12},buttons:{marginTop:e.spaces.space12,width:"100%"},button:{width:"100%",marginBottom:e.spaces.space16},moreInfoButton:{marginTop:e.spaces.space4},spinner:{marginTop:"5px"}})));var Ea=ia(xa),Ia=(s("AxOO"),s("OiMc")),Ra=s("cHvH");class ka extends r.Component{constructor(...e){super(...e),o()(this,"state",{nudgeDismissed:!1,showBlockModal:!1,showHideReplyEducation:!1,shouldHidePopover:!1}),o()(this,"_isNudgeEducationEnabled",this.context.featureSwitches.isTrue("responsive_web_second_degree_replies_nudge_education_enabled")),o()(this,"_renderNudge",(()=>{const{location:e,inReplyToStatus:t,nudgeId:s,nudgeType:a,onDiscard:i,screenWidth:n}=this.props,{showBlockModal:o,showHideReplyEducation:l}=this.state,d=null==t?void 0:t.conversation_id_str,c=e.state&&e.state.previousPath&&e.state.previousPath.split("/status/").slice(-1)[0].split("/")[0];return a&&s&&t&&t.id_str?r.createElement(Ea,{conversationId:d,conversationModule:c&&this._getConversationModule(c),hidePopover:this._hidePopover,inReplyToStatusId:t.id_str,nudgeId:s,nudgeType:a,onDiscard:i,onRevise:this._handleDismissNudge,onSend:this._handleSend,recipient:t.user,screenWidth:n,setShowBlockModal:this.setShowBlockModal,setShowHideReplyEducation:this.setShowHideReplyEducation,showBlockModal:o,showHideReplyEducation:l}):null})),o()(this,"_getConversationModule",Object(at.a)((e=>Object(Fs.a)({focalTweetId:e})))),o()(this,"_handleSend",(()=>{const{onSend:e}=this.props;this._handleDismissNudge(),e()})),o()(this,"_handleDismissNudge",(e=>{const{clearNudgeType:t,nudgeType:s,screenWidth:a}=this.props;e&&e.stopPropagation(),this._isNudgeEducationEnabled&&a>=S.a.theme.breakpoints.small&&s&&this.setState({nudgeDismissed:!0}),t()})),o()(this,"_hidePopover",(()=>{this.setState({shouldHidePopover:!0})})),o()(this,"setShowHideReplyEducation",(e=>{this.setState({showHideReplyEducation:e})})),o()(this,"setShowBlockModal",(e=>{this.setState({showBlockModal:e})}))}render(){const{children:e,nudgeType:t,screenWidth:s}=this.props,{nudgeDismissed:a,shouldHidePopover:i}=this.state;return this._isNudgeEducationEnabled&&s>=S.a.theme.breakpoints.small&&!i?r.createElement(Ia.a,{disabled:a,onDismiss:this._handleDismissNudge,renderContent:this._renderNudge,visibilityBehavior:t?Ia.a.VISIBILITY_BEHAVIOR.forceVisible:Ia.a.VISIBILITY_BEHAVIOR.forceHidden,withArrow:!0,withFixedPosition:!0,withMask:!!t},e):r.createElement(r.Fragment,null,e,this._renderNudge())}}o()(ka,"contextType",l.a);var Aa=e=>r.createElement(Ra.a,null,(({screenWidth:t})=>r.createElement(ka,i()({},e,{screenWidth:t})))),Ma=s("7myi"),Ba=s("7nmT"),Da=s.n(Ba),Oa=s("vbWy"),La=s("Rp9C"),Pa=s("k49u");const Fa=I.a.i859a9d3,Ha=I.a.a7478929,Na=I.a.adf527d2,ja=I.a.b25c5b2a,Va=I.a.cc85b9f5,Ua=I.a.a3f10d61,za=I.a.d74da9b8,Wa=I.a.c3ebec63,Ka=I.a.b6266b34,Ga=I.a.a59566d7,$a=I.a.g30d7ec5,qa=I.a.d484fca9,Xa=I.a.c51ba396,Ya=I.a.ef2fa90b;var Ja={defaultToast:{text:Na},[Pa.a.OverStatusUpdateLimit]:{toast:{text:Ha,action:{label:Fa,link:"https://support.twitter.com/articles/15364"}}},[Pa.a.DuplicateStatusError]:{toast:{text:ja}},[Pa.a.CurrentUserSuspended]:{toast:{text:Va}},[Pa.a.InReplyToTweetNotFound]:{toast:{text:Ua}},[Pa.a.MentionLimitInTweetExceeded]:{toast:{text:za}},[Pa.a.UrlLimitInTweetExceeded]:{toast:{text:Wa}},[Pa.a.HashtagLimitInTweetExceeded]:{toast:{text:Ka}},[Pa.a.CashtagLimitInTweetExceeded]:{toast:{text:Ga}},[Pa.a.HashtagLengthLimitInTweetExceeded]:{toast:{text:$a}},[Pa.a.AttachmentTypesLimitInTweetExceeded]:{toast:{text:qa}},[Pa.a.StatusMalwareError]:{toast:{text:Xa,action:{label:Fa,link:"https://support.twitter.com/articles/90491"}}},[Pa.a.StatusTooLongError]:{toast:{text:Ya}},showToast:!0},Qa=s("N5qz"),Za="tweetButton",ei="tweetButtonInline",ti=s("aITJ"),si=s("sCk0"),ai=s("4zmP"),ii=s("JYMr"),ni=s("rziq"),oi=s("jTgF"),ri=s("3A2y"),li=s("tn7R"),di=s("s1N3"),ci=s("4FGy"),hi=s("+d3d"),pi=s("mN6z"),ui=s("sXY3");const mi=I.a.dad5a4b8,gi=I.a.e65aed64,_i=I.a.d8222374,yi=I.a.j890123a,bi=I.a.bb01231c,Ci=I.a.d4ab68e2,fi=I.a.d8af8a4c,wi=I.a.d09d4c05,Ti=I.a.i2209530,vi=I.a.bf9b89e4,xi=I.a.f277e949,Si=I.a.b551cd22,Ei=I.a.f026a7fa,Ii=I.a.a5d4fda0,Ri=I.a.ib067d6a,ki=d.canUseDOM&&document.documentElement&&"scrollBehavior"in document.documentElement.style,Ai={component:"article_nudge"};class Mi extends r.Component{constructor(e,t){super(e,t),o()(this,"_getParentKey",(()=>{const{isInline:e,parentTweetId:t}=this.props;return t||(e?Jt.a.homeTimeline:Jt.a.modal)})),o()(this,"_updateSingleComposer",((e,t)=>{const{updateSingleComposer:s}=this.props;return s({updates:e,index:t,parentKey:this._getParentKey()})})),o()(this,"_resetDraft",(()=>{const{resetDraft:e}=this.props;return e(this._getParentKey())})),o()(this,"_syncTexts",(()=>{const{composerData:e}=this.props,{textMap:t}=this.state;e.forEach(((e,s)=>{const a=t[e.key];"string"==typeof a&&a!==e.text&&this._updateSingleComposer({text:a},s)}))})),o()(this,"_hasGif",(e=>e.gifMetadata||e.media.some((e=>e.mediaFile&&e.mediaFile.isGif)))),o()(this,"_hasPhoto",(e=>e.media&&e.media.some((e=>e.mediaFile&&e.mediaFile.isImage)))),o()(this,"_hasVideo",(e=>e.media&&e.media.some((e=>e.mediaFile&&e.mediaFile.isVideo&&!e.mediaFile.isGif)))),o()(this,"_handleAnimateComplete",(()=>{const{activeComposerIndex:e,onHandleAppBarHeight:t}=this.props,s=Da.a.findDOMNode(this._composerRefs[e]);if(s instanceof window.Element){const{top:e,bottom:a}=s.getBoundingClientRect(),i=Math.max(e,window.scrollY);if(i<window.pageYOffset||a>window.innerHeight){const e=t?i-t()-14:i-14,s=Math.max(e,0);window.requestAnimationFrame((()=>{ki?window.scrollTo({top:s,left:0,behavior:"smooth"}):window.scrollTo(0,s)}))}}})),o()(this,"_handleFetchTweetIfNeeded",(()=>{const{createLocalApiErrorHandler:e,inReplyToStatus:t,inReplyToStatusId:s,fetchTweetIfNeeded:a,quotedStatus:i,quotedStatusId:n}=this.props;!t&&s&&a(s).catch(e(Bs.a)),!i&&n&&a(n).catch(e(Bs.a))})),o()(this,"_blockHistory",((e,t)=>{const{isInline:s}=this.props,a=!s&&/unsent/.test(e.pathname),i=!s&&!/\/compose\/tweet\/?$/.test(e.pathname);return this.shouldShowDiscardConfirmation&&"POP"===t&&i?(this.setState({showDiscardTweetConfirmation:!0}),!1):this._canSaveDraft&&a&&"PUSH"===t?this.shouldShowDiscardConfirmation?(this.setState({showDiscardTweetConfirmation:!0,navigatingToOutbox:a}),!1):(this._resetDraft(),!0):!this.shouldShowBackgroundSendConfirmation||"POP"!==t||!i||(this._cancelAllMediaUploads(),!1)})),o()(this,"_getKeyCommandHandlers",(()=>{const{typeaheadActive:e}=this.state;return e?this._keyCommandHandlersForActiveTypeahead:this._keyCommandHandlers})),o()(this,"handleTweetOrRetweet",(()=>{this._scribe({section:"composition",element:"send_tweet",action:"click"});if(this._areComposersValid())return this.isRetweet?this._handleRetweet():this._handleTweet()})),o()(this,"_render",(e=>{var t,s,a,n;const{activeUser:o,addComposer:l,addToast:d,composeHeader:c,composerData:h,conversationControlsValue:p,copyDataFromInlineComposerToModalComposer:u,customizePropsForSingleComposerItem:m,history:g,isModal:_,isInline:y,isSending:b,isSelfThreadReply:C,inReplyToStatus:f,location:T,parentTweetId:v,positionCursorAtBeginning:x,richTextInputContext:S,scheduledFor:E,selectedCommunityId:I,typeaheadWrapper:R,userLanguage:k,windowWidth:A}=this.props,{errorMessage:M,focused:B,nudgeId:O,nudgeType:L,showDiscardTweetConfirmation:P,typeaheadActive:F,shouldDisableButton:H}=this.state,j=!_&&F,V=y?0:this.props.activeComposerIndex,U=j||y?[h[V]]:h,z=this._areComposersValid(),W=this.hasNonCompliantQuote&&this.isRetweet,K=y?w.a:si.a,G=y?{}:{onAnimateComplete:_?void 0:this._handleAnimateComplete},$=N.a.includes(null==f||null==(t=f.conversation_control)?void 0:t.policy)&&(null==f||null==(s=f.conversation_control)?void 0:s.invite_via_mention),X=H||!z||W,Y=y&&Qa.a.isOneColumnSquishedLayout(A)||this.isCommunityTweet;return r.createElement(w.a,{ref:e?this._setHiddenRootRef:this._setRootRef,style:[v?Bi.rootInlineReply:Bi.root,e&&Bi.hidden]},y?this._renderProgressBar():null,M&&r.createElement(w.a,{style:Bi.inlineCallout},r.createElement(ai.a,{action:null!=(a=M.action)&&a.label&&null!=(n=M.action)&&n.link?{label:M.action.label,link:M.action.link}:void 0,text:M.text,type:"danger"})),r.createElement(w.a,{onFocus:this._handleFocus,style:[Bi.content,v&&Bi.contentInlineReply,_&&Bi.contentModal]},f?this._renderReplyContext(e):null,c,r.createElement(K,G,U.map(((t,s)=>{const a=Object(q.h)(t.scheduledFor),n=h.indexOf(t),c=m(t,s,U),v=r.createElement(Aa,{clearNudgeType:this.clearNudgeType,inReplyToStatus:f,location:T,nudgeId:O,nudgeType:L,onDiscard:this._handleDismissComposerFromNudge,onSend:this._handleSendTweet},_||y?r.createElement(D.a,{disabled:X,onPress:this.handleTweetOrRetweet,size:"normal",style:Bi.inlineSendButton,testID:_?Za:ei,type:"primary"},Object(Ds.a)({inReplyToStatus:!!f,isSelfThreadReply:!!C,isQuoteTweet:!!this.isQuoteTweet,isRetweet:!!this.isRetweet,isScheduled:!!a,isThread:this.isThread})):null),A=this._getSingleComposerDataWithLatestText(t);return r.createElement(w.a,{key:t.key},r.createElement(Ht,i()({addToast:d,additionalToolbarContent:v,autoFocus:!e&&this.isInlineReply&&B,conversationControlsValue:p,data:A,disableAddTweet:h.length>=25,editable:!b&&!!o,hidePollAndScheduling:Y,history:g,index:n,isActive:n===V&&!b,isExpanded:0!==s||this._shouldBeExpanded(e),isInline:y,isInlineReply:this.isInlineReply,isLast:y||n===h.length-1,isReply:!!f||this.isInlineReply,isSelfThreadReply:!!C,keyCommandHandlers:this._getKeyCommandHandlers(),loggedInUser:o,onAddComposer:y?u:l,onFilesAdded:this._handleAddMediaFiles(n),onFocus:this._handleComposerFocus,onRemoveComposer:this._handleRemoveComposer,onRemoveMedia:this._handleMediaRemove,onTextChange:this._handleTextChange,onTextInputBlur:this._handleTextOnBlur(A.key,s),onTypeaheadStateChange:this._handleTypeaheadStateChange,positionCursorAtBeginning:!!x,ref:this._setComposerRef(n),richTextInputContext:S,scheduledFor:E,selectedCommunityId:I,setActiveParentKey:this._setActiveParentKey,twitterTextConfigurationVersion:"version3",typeaheadActive:F,typeaheadWrapper:R,updateCommunityValue:this._updateCommunityValue,updateConversationControlsValue:this._updateConversationControlsValue,updateSingleComposer:this._updateSingleComposer,userLanguage:k,withFlexibleParticipation:$},c)))}))),P?this._canSaveDraft?r.createElement(Qs.a,{cancelButtonLabel:Ci,confirmButtonLabel:Ti,headline:fi,onCancel:this._handleConfirmDiscardTweet,onConfirm:this._handleDraftTweet,onMaskClick:this._handleCancelDiscardTweet,text:wi}):r.createElement(Qs.a,{confirmButtonLabel:Ci,confirmButtonType:"destructive",headline:this.isThread?yi:_i,onCancel:this._handleCancelDiscardTweet,onConfirm:this._handleConfirmDiscardTweet,text:bi}):null,r.createElement(w.a,{style:[b&&Bi.mask]})))})),o()(this,"_renderReplyContext",(e=>{const{activeUser:t,excludedRecipients:s,isInline:a,isSelfThreadReply:i,inReplyToStatus:n,selectedCommunityName:o}=this.props;if(n&&this._shouldBeExpanded(e))return r.createElement(Gt,{communityName:o,excludedRecipients:s,inReplyToStatus:n,key:s.join(),loggedInUserId:t?t.id_str:void 0,onPress:this._handleViewRecipients,shouldDisplayRepliesText:!i,showParentTweet:!a})})),o()(this,"_setRootRef",(e=>{e&&(this._root=e)})),o()(this,"_setHiddenRootRef",(e=>{e&&(this._hiddenExpandedRoot=e)})),o()(this,"_handleTweet",(()=>{const{composerData:e}=this.props,{scheduledFor:t}=e[0];this.setState({errorMessage:void 0}),t?Object(q.h)(t)&&this._handleScheduleTweet():this._checkToxicAndSendTweet()})),o()(this,"_handleTweetError",((e,t)=>s=>{const{analytics:a,createLocalApiErrorHandler:i}=this.props;if(Object(oi.d)(s)&&s.code===Os.b.CANCELED)return a.scribeAction(e),Promise.resolve();const n=Object(oi.b)(s);if(n)return this.setState({errorMessage:n}),Promise.resolve();i({...t||Object(As.a)(void 0,!1)})(s),this.setState({errorMessage:{text:Ii}})})),o()(this,"_handleScheduleTweet",(()=>{const{addToast:e,composerData:t,excludedRecipients:s,inReplyToStatus:a,schedule:i}=this.props,n=this._getSingleComposerDataWithLatestText(t[0]);i({excludedRecipients:s,inReplyToStatus:a,scheduleData:n}).then((s=>{this.setState({tweetsSentOrScheduled:!0});const a=Object(q.c)(n.scheduledFor);if(a){const i=Object(q.b)(a),n=Object(q.i)(a),o=Si({scheduleDate:i,scheduleTime:n});e({text:o,action:{label:xi,link:"/compose/tweet/unsent/scheduled"}}),this._scribeTweetSent(t[0],{...s,id_str:s.scheduled_id_str},{isScheduled:!0})}this._updateConvoCardState(),this._close()})).catch(this._handleTweetError("schedule_tweet_cancel"))})),o()(this,"_handleDraftTweet",(()=>{const{addToast:e,composerData:t,draftTweet:s,excludedRecipients:a,inReplyToStatus:i}=this.props,n=this._getSingleComposerDataWithLatestText(t[0]);this._recordNudgeResult(la.SaveTweetToDrafts),s({excludedRecipients:a,inReplyToStatus:i,draftData:n}).then((s=>{this.setState({showDiscardTweetConfirmation:!1}),e({text:vi,action:{label:xi,link:"/compose/tweet/unsent/drafts"}}),this._scribeTweetSent(t[0],{...s,id_str:s.draft_id_str},{isDraftTweet:!0}),this._updateConvoCardState(),this._close()})).catch(this._handleTweetError("draft_tweet_cancel"))})),o()(this,"_handleSendTweet",(()=>{const{addToast:e,analytics:t,conversationControlsValue:s,composeSemanticCoreId:a,excludedRecipients:i,hasArticleNudge:n,history:o,inReplyToStatus:r,isSelfThreadReply:l,location:d,activeUser:h,selectedCommunityId:p,promotedContent:u,send:m}=this.props,{nudgeId:g}=this.state,_=this.props.composerData.map((e=>this._getSingleComposerDataWithLatestText(e))),y=Object(q.c)(_[0].scheduledFor);if(y){const t=Object(q.b)(y),s=Object(q.i)(y),a=Si({scheduleDate:t,scheduleTime:s});return e({text:a,action:{label:xi,link:""}}),void this._close()}if(i.length>0&&t.scribe({element:"mentions",action:"edited"}),this._conversationControlsCreationEnabled)if("community"===s)t.scribe({action:"send_community_tweet"});else if("by_invitation"===s){const e=this._getSingleComposerDataWithLatestText(_[0]).text,s=Object(c.d)(e);t.scribe({action:s?"send_mentioned_tweet_with_mentions":"send_mentioned_tweet_without_mentions"})}else"followers"===s&&t.scribe({action:"send_my_followers_tweet"});const b=_.map(((e,t)=>({...e,pollChoices:this._composerRefs[t]?this._composerRefs[t].pollChoices:void 0,pollDuration:this._composerRefs[t]?this._composerRefs[t].pollDuration:void 0}))),C=this._isNudgeTweetypieEnabled&&this._isSecondaryDegreeNudge?{nudge_enabled:!0,nudge_types:["ReviseOrBlock","ReviseOrMute","ReviseOrHideThenBlock"],nudge_testing_keyword_enabled:!0,previous_nudge_id:g}:{},f=(null==r?void 0:r.community_id_str)||p,w=f?`8.31.${f}`:"",T=a?f?[a,w].join(","):a:w;m({...C,sendData:b,communityValue:f,conversationControlsValue:s,excludedRecipients:i,inReplyToStatus:r,isSelfThreadReply:l,promotedContent:u,composeSemanticCoreId:T}).then((t=>{this.setState({tweetsSentOrScheduled:!0}),t.map(((e,t)=>this._scribeTweetSent(_[t],e,{hasArticleNudge:n}))),t.length>1&&this._scribeThreadSent(_,t,"thread_send_success");const{onSent:s}=this.props,a=t.length>1?gi:mi;if(e({text:a,action:{label:xi,link:`/${h?h.screen_name:"i"}/status/${t[0].id_str}`}}),this._isNudgeEnabled&&g){const e=t[0].id_str;this._isShowNudgeEnabled?this._recordNudgeResult(la.SentTweet,e):this._recordNudgeResult(la.TweetSentWithoutShowingNudge,e)}this.isInlineReply&&this.setState({focused:!1}),this._updateConvoCardState(),this._close(),s&&s({sentTweets:t,inReplyToStatus:r})})).catch((e=>{var s;const{sentTweets:a=[]}=e,i=Array.isArray(e.errors)&&(null==(s=e.errors[0])?void 0:s.code),r=null==e?void 0:e.url,l=null==e?void 0:e.status,c={message:e.type,event_info:i?`${i}`:void 0,status_code:l,url:r};if(!this._isNudgeTweetypieEnabled||439!==i)throw a.map(((e,t)=>this._scribeTweetSent(_[t],e)),{hasArticleNudge:n}),Object(oi.d)(e)&&e.code===Os.b.CANCELED||t.scribe({action:"send_tweet_failure",data:c}),_.length>1&&this._scribeThreadSent(_,a,"thread_send_failure"),a.length&&o.replace({pathname:d.pathname,state:{...Object(ri.a)(d.state||{},"quotedStatus"),inReplyToStatusId:a[a.length-1].id_str,isSelfThreadReply:!0}}),e;{var h;const t=null==(h=e.errors[0])?void 0:h.nudge,s=t.id,a=t.nudge_type,i=a.charAt(0).toUpperCase()+a.slice(1);this.setState({nudgeType:i,nudgeId:s})}})).catch(this._handleTweetError("send_tweet_cancel",Ja))})),o()(this,"_checkToxicAndSendTweet",(()=>{var e,t;const{activeUser:s,composerData:a,createNudge:i,inReplyToStatus:n,isSelfThreadReply:o}=this.props,{hasNudged:r}=this.state,l=null==n||null==(e=n.entities)||null==(t=e.user_mentions)?void 0:t.some((({screen_name:e})=>e===(null==s?void 0:s.screen_name))),d=this._getSingleComposerDataWithLatestText(a[0]).text;this._isSecondaryDegreeNudge=!(o||!l||!i||!d),!this._isNudgeTweetypieEnabled&&this._isNudgeEnabled&&!r&&this._isSecondaryDegreeNudge?(this.setState({shouldDisableButton:!0}),this._checkToxicWithTimeout(d).then((e=>{e.showNudge||this._handleSendTweet()})).finally((()=>{this.setState({shouldDisableButton:!1})}))):this._handleSendTweet()})),o()(this,"_makeTimeout",(()=>new Promise(((e,t)=>setTimeout(e,1500))))),o()(this,"_checkToxicWithTimeout",(e=>{const{inReplyToStatus:t,location:s}=this.props;return Promise.race([this._checkToxic(e),this._makeTimeout()]).then((e=>{var a,i,n,o,r;const l=null==e||null==(a=e.create_nudge)||null==(i=a.nudge)||null==(n=i.nudge_type)?void 0:n.__typename,d=null==e||null==(o=e.create_nudge)||null==(r=o.nudge)?void 0:r.id;this.setState({nudgeId:d});const c=null==t?void 0:t.user.muting,h=l===oa.ReviseOrMute&&c,p=s.state&&s.state.previousPath.includes("/hidden"),u=l===oa.ReviseOrHideThenBlock&&p;if(l){if(this.context.featureSwitches.isTrue("responsive_web_second_degree_replies_nudge_show_enabled"),this.context.featureSwitches.isTrue("responsive_web_second_degree_replies_nudge_get_enabled"),this._isShowNudgeEnabled&&!h&&!u)return this.setState({nudgeType:l,hasNudged:!0}),{showNudge:!0};this._recordNudgeAction(ra.NudgeNotShown)}return{}})).catch((()=>({})))})),o()(this,"_checkToxic",(e=>{const{createNudge:t,inReplyToStatusId:s,parentTweetId:a=s,inReplyToStatus:i}=this.props;return t(e,a,null==i?void 0:i.conversation_id_str)})),o()(this,"clearNudgeType",(()=>{this.setState({nudgeType:void 0})})),o()(this,"_setActiveParentKey",(()=>{const{setActiveParentKey:e}=this.props;e(this._getParentKey())})),o()(this,"_scribeTweetSent",((e,t,{isScheduled:s=!1,isDraftTweet:a=!1,hasArticleNudge:i=!1}={})=>{const n=e.scheduledTweetId?"schedule_edit_":"schedule_",o=e.draftTweetId?"draft_edit_":"draft_",r=a?o:s?n:"send_",l={items:[La.a.getTweetItem(t)]},d=e.pollActive&&e.pollValid,c=e.mediaMetadata&&Object(li.a)(e.mediaMetadata).some((e=>!!e.altText)),h=this.props.inReplyToStatus||this.props.inReplyToStatusId,p=this.props.isInline?"inline_reply":"tweet_box_dialog";if(this._scribe({action:`${r}tweet`},l),a||!e.draftTweetId||e.scheduledTweetId||this._scribe({action:`${r}draft_tweet`},l),this.isQuoteTweet&&(this._scribe({action:"retweet_with_comment"},l),i&&this._scribe({...Ai,element:"result",action:"retweet_with_comment"},l)),h&&this._scribe({component:p,action:`${r}reply`},l),d&&this._scribe({action:`${r}poll_tweet`},l),this._hasPhoto(e)&&(this._scribe({action:`${r}photo_tweet`},l),c&&this._scribe({action:`${r}photo_tweet_with_alt_text`},l)),this._hasVideo(e)&&this._scribe({action:`${r}video_tweet`},l),e.gifMetadata){const s=La.a.getGifSearchItemForTweet(t.id_str,e.gifMetadata);this._scribe({element:"remote",action:`${r}gif_tweet`},{items:[s]});const a=e.mediaMetadata&&Object(li.a)(e.mediaMetadata).some((e=>!!e.defaultAltText));(c||a)&&this._scribe({element:"remote",action:`${r}gif_tweet_with_alt_text`},{event_info:c?"user_entered":"from_provider",items:[s]})}else this._hasGif(e)&&(this._scribe({element:"local",action:`${r}gif_tweet`},l),c&&this._scribe({element:"local",action:`${r}gif_tweet_with_alt_text`},l))})),o()(this,"_scribeThreadSent",((e,t,s)=>{const{inReplyToStatus:a}=this.props,i={items:[La.a.getSendThreadItem(e,t.length,!!a)]};this._scribe({action:s},i)})),o()(this,"_scribeRetweet",(e=>{const{hasArticleNudge:t}=this.props,s={items:[La.a.getTweetItem(e)]};this._scribe({action:"retweet"},s),t&&this._scribe({...Ai,element:"result",action:"retweet"},s)})),o()(this,"_handleRetweet",(()=>{const{composerData:e,createLocalApiErrorHandler:t,onSent:s,retweet:a}=this.props,i=e[0].quotedStatus;i&&(this._scribeRetweet(i),a(i.id_str,{}).then((e=>{this.setState({tweetsSentOrScheduled:!0}),this._close(),s&&s({sentTweets:e?[e]:[]})}),t(Oa.a)))})),o()(this,"handleDismissComposer",(()=>{this.shouldShowDiscardConfirmation?this.setState({showDiscardTweetConfirmation:!0}):this.shouldShowBackgroundSendConfirmation?this._cancelAllMediaUploads():this._close()})),o()(this,"_handleDismissComposerFromNudge",(()=>{this.shouldShowBackgroundSendConfirmation?this._cancelAllMediaUploads():this._close()})),o()(this,"_cancelAllMediaUploads",(()=>{this.props.composerData.forEach((e=>e.media.forEach((e=>e.uploading&&e.uploader&&e.uploader.cancel()))))})),o()(this,"_handleConfirmDiscardTweet",(()=>{const{analytics:e,hasArticleNudge:t}=this.props,s=this._canSaveDraft?"draft":"send";this.setState({showDiscardTweetConfirmation:!1}),this._recordNudgeResult(la.CancelComposer),this._close(),e.scribeAction(`${s}_tweet_discard`),t&&this._scribe({...Ai,element:"result",action:"cancel"})})),o()(this,"_handleCancelDiscardTweet",(()=>{this.setState({showDiscardTweetConfirmation:!1},(()=>{this._restoreFocusToActiveComposer()}))})),o()(this,"_restoreFocusToActiveComposer",(()=>{const{activeComposerIndex:e}=this.props;void 0!==e&&this._composerRefs[e]&&this._composerRefs[e].focus()})),o()(this,"_close",(()=>{const{history:e,isSending:t,onCloseComposer:s}=this.props;t||(this._resetDraft(),window.Windows&&Object(Ps.a)().then((({default:e})=>e.shareCompletedCallback()))),this.state.navigatingToOutbox?this._canSaveDraft?e.push("/compose/tweet/unsent/drafts"):e.push("/compose/tweet/unsent/scheduled"):s&&s()})),o()(this,"_handleComposerFocus",(e=>{this._composerRefs[e]?this.props.updateActiveComposerIndex(e):setTimeout((()=>{this._restoreFocusToActiveComposer()}),0)})),o()(this,"_handleFocus",(()=>{const{getTweetHeight:e}=this.props,{focused:t}=this.state;t||(this.isInlineReply&&this._scribe({element:"inline_reply",action:"reply"}),this.setState({focused:!0},(()=>{if(e&&this._hiddenExpandedRoot){const t=this._hiddenExpandedRoot.getBoundingClientRect().height+e();this._handleHeightChanged(t)}})))})),o()(this,"_handleHeightChanged",(e=>{const{onHeightChanged:t,onAnimationStarted:s,onAnimationEnded:a}=this.props;s&&s("none"),t&&t(e),window.requestAnimationFrame((()=>{a&&a()}))})),o()(this,"_handleTypeaheadStateChange",(e=>{this.setState({typeaheadActive:e})})),o()(this,"_handleRemoveComposer",(()=>{const{activeComposerIndex:e,composerData:t,history:s,location:a,removeComposer:i}=this.props;0===e&&t[0].quotedStatus&&s.replace({pathname:a.pathname,state:Object(ri.a)(a.state||{},"quotedStatus")}),i(),setTimeout(this._restoreFocusToActiveComposer)})),o()(this,"_handleViewRecipients",(()=>{const{excludedRecipients:e,history:t,inReplyToStatus:s}=this.props;this._setActiveParentKey(),t.push({pathname:"/compose/tweet/recipients",state:{excludedRecipients:e,inReplyToStatus:s}})})),o()(this,"_handleTextChange",((e,t)=>{const{textMap:s}=this.state,{activeComposerIndex:a,isInline:i,setValidity:n}=this.props;if(this.setState({textMap:{...s,[t]:e}},(()=>{n&&n(this._areComposersValid())})),ti.b.isIOS()){const t=i?0:a;this._updateSingleComposer({text:e},t)}})),o()(this,"_handleTextOnBlur",Object(at.a)(((e,t)=>()=>{const{textMap:s,tweetsSentOrScheduled:a}=this.state,{composerData:i}=this.props,n=s[e],o=i.some((t=>t.key===e));"string"==typeof n&&!a&&o&&this._updateSingleComposer({text:n},t)}))),o()(this,"_updateConversationControlsValue",(e=>{if(!this._conversationControlsCreationEnabled)return;const{updateConversationControlsValue:t}=this.props;t(e,this._getParentKey())})),o()(this,"_updateCommunityValue",(e=>{const{updateCommunityValue:t,selectedCommunityIdFromLocationState:s,location:a,history:i}=this.props;s&&i.replace({pathname:a.pathname,state:Object(ri.a)(a.state||{},"selectedCommunityId")}),t(e,this._getParentKey())})),o()(this,"_renderProgressBar",(()=>{const{sendingProgress:e,isSending:t}=this.props;return r.createElement(ii.a,{progress:t?Math.max(e,.02):0,style:[Bi.progressBar]})})),o()(this,"_updateConvoCardState",(()=>{const{convoCardData:e,updateConvoCardState:t}=this.props;if(e){const{cardId:s,nextState:a}=e;a&&s&&t(s,{cardState:a})}})),o()(this,"_attachExternalMedia",(e=>t=>Promise.all(t.map((e=>Object(Ms.a)(e)))).then(this._handleAddMediaFiles(e)))),o()(this,"_handleAddMediaFiles",(e=>t=>{const{addMedia:s,addToast:a,composerData:i,dataSaverMode:n,processMultipleMedia:o,removeMediaUpload:r,uploadMedia:l}=this.props;s(t,{location:Ls.d.Tweet}).then((t=>{const s=i[e],d=t.map((e=>e.id));if(Mi._validateMedia(s,t)){const a=s.media.map((e=>e.id));this._updateSingleComposer({mediaIds:Object(di.a)(a.concat(d))},e),o(t,{onFailure:this._handleMediaRemoveFactory(e)}).then((e=>{n||l(e.map((e=>e.id)),{preUpload:!0})}))}else a({text:Ri}),r(d)}))})),o()(this,"_handleMediaRemoveFactory",(e=>t=>this._handleMediaRemove(e,t))),o()(this,"_handleMediaRemove",((e,t)=>{const{composerData:s,removeMediaUpload:a}=this.props,{media:i,mediaMetadata:n,mediaTags:o}=s[e],r=((e,...t)=>Object(ci.a)(e,t))(i.map((e=>e.id)),t),l=r.length>0?o:[];this._updateSingleComposer({mediaIds:r,gifMetadata:void 0,mediaMetadata:n&&Object(ri.a)(n,t.toString()),mediaTags:l},e),a(t),this.setState({errorMessage:void 0})})),o()(this,"_setComposerRef",(e=>t=>{this._composerRefs[e]=t})),o()(this,"_shouldBeExpanded",(e=>{const{composerData:t,parentTweetId:s}=this.props,{focused:a}=this.state;if(e||a)return!0;const i=!Object($.b)(this._getSingleComposerDataWithLatestText(t[0]));return!s||i})),o()(this,"_areComposersValid",(()=>{const{composerData:e}=this.props,t=e[0].quotedStatus,s=t&&t.community_id_str;return this.isRetweet&&!s||e.every((e=>Object($.d)(this._getSingleComposerDataWithLatestText(e))))})),o()(this,"_areComposersEmptyOrUnchanged",(()=>{const{composerData:e,prepopulatedText:t}=this.props;return e.every((e=>Object($.c)(this._getSingleComposerDataWithLatestText(e),t)))})),o()(this,"_getSingleComposerDataWithLatestText",(e=>{const{textMap:t}=this.state;return"string"==typeof t[e.key]?{...e,text:t[e.key]}:e})),o()(this,"_recordNudgeAction",(e=>{const{recordNudgeAction:t}=this.props,{nudgeId:s}=this.state;s&&t({nudgeId:s,nudgeActionType:e})})),o()(this,"_recordNudgeResult",((e,t)=>{const{recordNudgeResult:s}=this.props,{nudgeId:a}=this.state;a&&s(t?{nudgeId:a,nudgeResultType:e,tweetId:t}:{nudgeId:a,nudgeResultType:e})})),this.state={focused:!1,showDiscardTweetConfirmation:!1,textMap:{},tweetsSentOrScheduled:!1,typeaheadActive:!1,shouldDisableButton:!1},this._composerRefs={},this._conversationControlsCreationEnabled=!0===this.context.featureSwitches.getValueWithoutScribeImpression("conversation_controls_limited_replies_creation_enabled"),this._throttledSyncTexts=Object(hi.a)(this._syncTexts,1e3,{leading:!0,trailing:!1}),this._keyCommandHandlers={[ni.b]:this.handleTweetOrRetweet,[ni.a]:this.handleDismissComposer},this._keyCommandHandlersForActiveTypeahead={[ni.b]:this.handleTweetOrRetweet},this._isNudgeEnabled=!0===this.context.featureSwitches.getValueWithoutScribeImpression("responsive_web_second_degree_replies_nudge_get_enabled"),this._isShowNudgeEnabled=!0===this.context.featureSwitches.getValueWithoutScribeImpression("responsive_web_second_degree_replies_nudge_show_enabled"),this._isNudgeTweetypieEnabled=!0===this.context.featureSwitches.getValueWithoutScribeImpression("responsive_web_second_degree_replies_nudge_tweetypie_enabled")}UNSAFE_componentWillMount(){const{onRef:e}=this.props;e&&e(this)}componentDidMount(){const{convoCardData:e,externalMedia:t,externalMediaFiles:s,history:a,isIntentRoute:i,isInline:n,location:o,prepopulatedText:r,setValidity:l}=this.props;if(this._unblockHistory=this.props.history.block(this._blockHistory),t.length>0&&this._attachExternalMedia(0)(t),s.length>0&&this._handleAddMediaFiles(0)(s),this._handleFetchTweetIfNeeded(),r||e&&e.cardUrl){const t={};r&&(t.text=r),e&&e.cardUrl&&(t.cardUrl=e.cardUrl),this._updateSingleComposer(t)}(r||e&&e.cardUrl||t.length>0||s.length>0)&&!i&&a.replace({query:Object(Yt.b)(o.query),search:"",pathname:o.pathname,state:Object(ri.a)(Object(Yt.b)(o.state||{}),["defaultText","externalMedia","externalMediaFiles"])}),l&&l(this._areComposersValid()),n||this._setActiveParentKey(),this.isInlineReply&&this._root&&(this._height=this._root.getBoundingClientRect().height)}componentDidUpdate(e,t){const{addToast:s,composerData:a,copyDataFromInlineReplyComposerToModalComposer:i,externalMedia:n,externalMediaFiles:o,onRef:r,parentTweetId:l,replyPressToggle:d,setValidity:c,windowWidth:h,getTweetHeight:p}=this.props,{textMap:u}=this.state;if(this.isInlineReply&&p&&this._root&&(e.composerData!==a||t.textMap!==u)){const e=this._root.getBoundingClientRect().height;if(e!==this._height){this._height=e;const t=e+p();this._handleHeightChanged(t)}}h!==e.windowWidth&&this._throttledSyncTexts(),e.onRef&&e.onRef!==r&&e.onRef(void 0),r&&r!==e.onRef&&r(this),a.length>=25&&e.composerData.length<25&&s({text:Ei}),n.length>0&&n!==e.externalMedia?this._attachExternalMedia(0)(n):o.length>0&&o!==e.externalMediaFiles&&this._handleAddMediaFiles(0)(o),c&&!Object(pi.a)(a,e.composerData)&&c&&c(this._areComposersValid()),d!==e.replyPressToggle&&i(l)}componentWillUnmount(){const{composerData:e,onRef:t}=this.props;this._unblockHistory&&this._unblockHistory(),t&&t(void 0),Object(ui.a)(this._composerRefs).forEach((([t,s])=>{const a=parseInt(t,10);if(s)return e[a]&&e[a].pollActive&&this._updateSingleComposer({initialPollChoices:s.pollChoices,initialPollDuration:s.pollDuration},a)})),this._syncTexts()}render(){const{parentTweetId:e}=this.props;return e?r.createElement(r.Fragment,null,this._render(!0),this._render()):this._render()}_scribe(e,t){const{analytics:s}=this.props;s.scribe({...e,data:t})}get isInlineReply(){const{parentTweetId:e}=this.props;return!!e}get isThread(){return this.props.composerData.length>1}get isRetweet(){const{composerData:e}=this.props,t=0===e[0].media.length,s=this._getSingleComposerDataWithLatestText(e[0]).text;return!this.isThread&&e[0].quotedStatus&&""===s&&t}get isQuoteTweet(){const{composerData:e}=this.props,t=this._getSingleComposerDataWithLatestText(e[0]).text;return!this.isThread&&e[0].quotedStatus&&t.length>0}get hasNonCompliantQuote(){var e;const{composerData:t}=this.props;return"non_compliant"===(null==(e=t[0].quotedStatus)?void 0:e.limited_actions)}get shouldShowDiscardConfirmation(){const{isSending:e,composerData:t}=this.props,{scheduledTweetId:s}=t[0],{showDiscardTweetConfirmation:a}=this.state,i=this._areComposersEmptyOrUnchanged();return!(e||i||a||s)}get shouldShowBackgroundSendConfirmation(){const{composerData:e,isSending:t}=this.props,s=e.some((e=>e.media.some((e=>e.uploading))));return t&&s}get _canSaveDraft(){const{composerData:e,isInline:t}=this.props;return!(this.isCommunityTweet||this.isThread||e[0].pollActive||0!==e[0].mediaTags.length||t)}get isCommunityTweet(){const{inReplyToStatus:e,selectedCommunityId:t}=this.props;return!!(null!=e&&e.community_id_str||t)}}o()(Mi,"defaultProps",{customizePropsForSingleComposerItem:(e,t,s)=>({}),externalMedia:[],externalMediaFiles:[],isSelfThreadReply:!1,isModal:!1,positionCursorAtBeginning:!1,prepopulatedText:"",setValidity:()=>{},typeaheadWrapper:Ma.a}),o()(Mi,"contextType",l.a),o()(Mi,"_validateMedia",((e,t)=>{const{media:s}=e;return Object(c.c)(s.concat(t))}));const Bi=S.a.create((e=>({root:{paddingBottom:e.spaces.space4},rootInlineReply:{backgroundColor:e.colors.gray50,paddingBottom:e.componentDimensions.gutterVertical},content:{paddingVertical:e.spaces.space4,backgroundColor:e.colors.cellBackground},contentModal:{borderBottomLeftRadius:e.borderRadii.xLarge,borderBottomRightRadius:e.borderRadii.xLarge},contentInlineReply:{paddingVertical:e.componentDimensions.gutterVertical},mask:{...S.a.absoluteFillObject},inlineSendButton:{marginLeft:e.spaces.space12},progressBar:{position:"absolute",borderTopLeftRadius:e.borderRadii.small,borderTopRightRadius:e.borderRadii.small},inlineCallout:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},hidden:{position:"absolute",visibility:"hidden",width:"100%"}})));t.a=Object(me.a)(ks(Mi))},VjLy:function(e,t,s){"use strict";s.d(t,"a",(function(){return f}));var a=s("ERkP"),i=s("LT7J"),n=s("3XMw"),o=s.n(n),r=s("feu+"),l=s("eb3s"),d=s("lUZE"),c=s("5cUs");const h=o.a.ge5067bb,p=o.a.ea626ab3,u=o.a.fc716886,m=`${o.a.f2a2a06e}\n\n${o.a.f82c0bbf}`,g=o.a.b2615c6d,_=o.a.i62a03aa,y=o.a.cfd2f35d,b=o.a.a6450e83,C=o.a.hb279a11,f=({onConfirm:e,onCancel:t,onHideReplyImpression:s=(()=>{})})=>a.createElement(r.a,{actionLabel:h,graphic:d.a,headline:u,onAction:e,onClose:t,onImpression:s,onTertiaryAction:t,subtext:m,supportUrl:"https://help.twitter.com/en/using-twitter/mentions-and-replies?lang=browser#hidden-reply",tertiaryActionLabel:y});t.b=({addTip:e,addToast:t,createLocalApiErrorHandler:s,hideReply:n,onBlock:o,onTweetDismiss:r,scribeAction:d,shouldShowHideReplyTip:u,tweet:m})=>{const y=()=>{d({element:"moderated_replies_prompt",action:"impression"})};return{confirmation:u?{render:(e,t)=>f({onConfirm:e,onCancel:t,onHideReplyImpression:y})}:{render:(e,t)=>{const{user:{screen_name:s}}=m;return a.createElement(l.a,{cancelButtonLabel:_,confirmButtonLabel:b,confirmButtonType:"destructive",headline:g({screenName:s}),onCancel:e,onConfirm:()=>{o(),e()},text:C({screenName:s})})}},text:h,onClick:()=>{e({[i.a]:!0}),n(m.id_str,{conversation_id:m.conversation_id_str}).then((e=>{r&&r(),t({text:p})}),s({showToast:!0})),d({element:"moderate_reply"})},Icon:c.a}}},WtWS:function(e,t,s){"use strict";var a=s("ERkP"),i=s("Lsrn"),n=s("k/Ka");const o=(e={})=>Object(n.a)("svg",{...e,style:[i.a.root,e.style],viewBox:"0 0 24 24"},a.createElement("g",null,a.createElement("path",{d:"M12 1.25C6.072 1.25 1.25 6.072 1.25 12S6.072 22.75 12 22.75 22.75 17.928 22.75 12 17.928 1.25 12 1.25zm4.086 7.698L11.744 15.6s-.354.545-.416.607c-.146.146-.338.22-.53.22s-.384-.073-.53-.22l-2.7-2.704c-.293-.293-.293-.77 0-1.06.293-.294.768-.294 1.06 0l2.048 2.05 4.155-6.365c.227-.346.693-.443 1.04-.218.345.227.443.692.216 1.038z"})));o.metadata={width:24,height:24},t.a=o},c0ZR:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));const a=e=>new Promise(((t,s)=>{const a=new window.XMLHttpRequest;a.responseType="blob",a.onreadystatechange=()=>{a.readyState===window.XMLHttpRequest.DONE&&(200===a.status?t(a.response):s(new Error("Unexpected status code")))},a.onerror=e=>s(e),a.ontimeout=e=>s(e),a.open("GET",e,!0),a.send()}))},"p+r5":function(e,t,s){"use strict";s.d(t,"a",(function(){return v}));var a=s("97Jx"),i=s.n(a),n=s("KEM+"),o=s.n(n),r=s("ERkP"),l=s("t62R"),d=s("piX5"),c=s("3XMw"),h=s.n(c),p=s("tI3i"),u=s.n(p),m=s("oQhu"),g=s("rHpw"),_=s("aITJ"),y=s("MWbm"),b=(s("aWzz"),s("Oib4")),C=s("WtWS"),f=s("ioan");const w=e=>e.length,T=(e,t=w)=>t(e);class v extends r.Component{constructor(e){super(e),o()(this,"_blurOnBackspaceKeyUpForKaiOS",!1),o()(this,"_isLabelLarge",(()=>{const{isFocused:e,actualCount:t}=this.state;return!t&&!e})),o()(this,"_getTextInputStyle",Object(m.a)((e=>[x.root,!e&&x.disabled]))),o()(this,"_calculateLength",(e=>T(e,this.props.calculateLength))),o()(this,"_shouldRenderDisplayCount",(()=>{const{isFocused:e}=this.state,t=this._isFormInvalid();return Boolean((e||t)&&this._getMaxDisplayCount())})),o()(this,"_handleBlur",(e=>{const{onBlur:t}=this.props,{value:s}=e.currentTarget,a=this._calculateLength(s);this.setState({isFocused:!1,displayCount:a,actualCount:s.length}),t&&t(e)})),o()(this,"_handleChange",(e=>{const{onChange:t}=this.props,{value:s}=e.currentTarget,a=this._calculateLength(s);this.setState({isFocused:!0,displayCount:a,actualCount:s.length}),t&&t(e)})),o()(this,"_handleFocus",(e=>{const{onFocus:t}=this.props;this.setState({isFocused:!0}),t&&t(e)})),o()(this,"_handleKeyPress",(e=>{const{multiline:t,onKeyPress:s,onSubmitEditing:a}=this.props;s&&s(e),e.isDefaultPrevented()||"Enter"!==e.key||e.shiftKey||t||!a||(e.preventDefault(),a(e))})),o()(this,"_handleKeyDown",(e=>{const{onKeyDown:t}=this.props,{displayCount:s}=this.state,a=0===s;_.b.isKaiOS()&&"Backspace"===e.key&&a?this._blurOnBackspaceKeyUpForKaiOS=a:t&&t(e)})),o()(this,"_handleKeyUp",(e=>{const{onKeyUp:t}=this.props;_.b.isKaiOS()&&"Backspace"===e.key&&this._blurOnBackspaceKeyUpForKaiOS&&(e.preventDefault(),this.blur()),t&&t(e)})),o()(this,"_setTextInputRef",(e=>{this._textInput=e})),o()(this,"_checkComponentPropsUsageCorrectness",(e=>{const{defaultValue:t,maxLength:s,validLength:a,value:i,onChange:n}=e,o=!!n,r="string"==typeof i,l="string"==typeof t;u()(!(!l&&r&&!o),"A controlled component, a component with a value prop, must have an onChange handler. The value prop cannot be undefined."),u()(!(s&&a&&a>s),"Max length should be equal or greater than valid length."),u()(!(void 0!==s&&s<=0||void 0!==a&&a<=0),"Set editable to false instead of limiting the valid character count to 0.")})),o()(this,"_exceedsValidLength",(e=>{const t=this._getMaxDisplayCount();return!!t&&e>t})),o()(this,"_getMaxDisplayCount",(()=>this.props.validLength||this.props.maxLength)),this._checkComponentPropsUsageCorrectness(e);const{defaultValue:t,value:s}=e;this.state={displayCount:this._calculateLength(s||t||""),actualCount:w(s||t||""),isFocused:!1}}componentDidUpdate(e){const{validLength:t,maxLength:s,onChange:a,value:i}=this.props,{validLength:n,maxLength:o,onChange:r,value:l}=e;n===t&&s===o&&!!a===!!r&&"string"==typeof i===("string"==typeof l)||this._checkComponentPropsUsageCorrectness(this.props)}static getDerivedStateFromProps(e,t){const{calculateLength:s,value:a}=e,i="string"==typeof a?T(a,s):0;return"string"==typeof a&&i!==t.displayCount?{displayCount:i,actualCount:a.length}:null}render(){const{accessibilityLabel:e,errorText:t,helperText:s,style:a,editable:i}=this.props,{isFocused:n}=this.state,o=this._isFormInvalid();return r.createElement(y.a,{style:[S.root,a]},r.createElement(y.a,{accessibilityLabel:e,accessibilityRole:"label",style:[d.a.border,S.textInputFormStyle,o&&d.a.invalidBorderColor,n&&o&&d.a.focusedBorderInvalid,n&&!o&&d.a.focusedBorderValid,!i&&d.a.disabled]},r.createElement(y.a,{style:S.textInputFormWrapper},r.createElement(y.a,{style:[S.textInputHeader]},this._renderLabel(),this._shouldRenderDisplayCount()?this._renderDisplayCount():null),this._renderTextInput())),r.createElement(y.a,{style:[S.sidePadding,S.underTextInputForm]},r.createElement(y.a,{style:S.subtextWrapper},s?this._renderHelperText():null,o&&t?this._renderErrorText():null)))}_renderLabel(){const{label:e}=this.props,{isFocused:t}=this.state,s=t?"primary":"gray600",a=this._isFormInvalid()?"red500":s,i=this._isLabelLarge();return r.createElement(l.c,{color:i?"gray600":a,numberOfLines:1,size:i?"large":"small",style:[S.textInputHeaderItem,i&&{paddingTop:g.a.theme.spaces.space16},S.transition]},e)}_renderTextInput(){const{accessibilityLabel:e,calculateLength:t,editable:s,errorText:a,helperText:n,Icon:o,invalid:d,label:c,maxLength:h,onBlur:p,onChange:u,onSubmitEditing:m,onFocus:g,onKeyDown:_,onKeyPress:b,onKeyUp:C,showValidationIcon:w,style:T,validLength:v,...S}=this.props,E=this.getValue(),I=this._calculateLength(E),R=h?h+E.length-I:void 0;return r.createElement(y.a,{style:x.container},o&&!this._isLabelLarge()?this._renderIcon():null,r.createElement(l.c,{size:"large",style:x.wrapper},r.createElement(f.a,i()({},S,{editable:s,maxLength:R,onBlur:this._handleBlur,onChange:this._handleChange,onFocus:this._handleFocus,onKeyDown:this._handleKeyDown,onKeyPress:this._handleKeyPress,onKeyUp:this._handleKeyUp,ref:this._setTextInputRef,style:this._getTextInputStyle(s)}))),w&&!this._isLabelLarge()?this._renderValidationIcon():null)}_renderHelperText(){return r.createElement(y.a,{accessibilityLiveRegion:"polite"},r.createElement(l.c,{color:"gray600",size:"small",style:S.subtext},this.props.helperText))}_renderErrorText(){return r.createElement(y.a,{accessibilityLiveRegion:"assertive"},r.createElement(l.c,{color:"red500",size:"small",style:S.subtext},this.props.errorText))}_renderDisplayCount(){const{displayCount:e}=this.state,t=this._getMaxDisplayCount(),s=this._exceedsValidLength(e),a=t&&h.a.ia24dc8c(t),i=h.a.ia24dc8c(e);return r.createElement(y.a,{accessibilityLiveRegion:"polite",style:[S.textInputHeaderItem,S.displayCount]},r.createElement(l.c,{color:s?"red500":"gray600",size:"small"},a?`${i}/${a}`:""))}_renderIcon(){const{Icon:e}=this.props,{isFocused:t}=this.state,s=[S.icon,t&&S.focusedIcon];return e&&r.createElement(e,{style:s})}_renderValidationIcon(){return this._isFormInvalid()?r.createElement(b.a,{style:[S.validationIcon,d.a.invalidColor]}):r.createElement(C.a,{style:[S.validationIcon,d.a.validColor]})}_isFormInvalid(){const{displayCount:e}=this.state;return this.props.invalid||this._exceedsValidLength(e)||!1}blur(){this._textInput&&this._textInput.blur()}getValue(){return this._textInput&&this._textInput.getValue()||""}focus(){this._textInput&&this._textInput.focus()}isValidLength(){const e=this.getValue(),t=this._calculateLength(e);return!this._exceedsValidLength(t)}}o()(v,"defaultProps",{autoComplete:"on",autoCorrect:!0,autoFocus:!1,editable:!0,invalid:!1}),v.propTypes={};const x=g.a.create((e=>({container:{flexDirection:"row",flexGrow:1,flexShrink:1,overflow:"hidden",paddingBottom:e.spaces.space4,paddingHorizontal:e.spaces.space4,paddingTop:e.spaces.space12,marginTop:e.spaces.space16},root:{backgroundColor:"transparent",borderRadius:e.borderRadii.none,borderWidth:e.borderWidths.none,boxSizing:"border-box",color:"inherit",fontFamily:"inherit",fontSize:"inherit",textAlign:"inherit",outlineStyle:"none",padding:0},wrapper:{alignItems:"center",display:"flex",fontSize:e.fontSizes.headline2,width:"100%"},disabled:{color:e.colors.gray600}}))),S=g.a.create((e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},textInputFormStyle:{flexDirection:"row"},textInputFormWrapper:{flexGrow:1,flexShrink:1},textInputHeader:{flexDirection:"row",justifyContent:"space-between",position:"absolute",height:"100%",width:"100%"},textInputHeaderItem:{paddingTop:e.spaces.space4,paddingHorizontal:e.spaces.space4},displayCount:{flexGrow:1,alignItems:"flex-end"},sidePadding:{paddingHorizontal:e.spaces.space4},underTextInputForm:{flexDirection:"row"},subtextWrapper:{flexDirection:"column",flex:1,paddingRight:e.spaces.space20,paddingTop:e.spaces.space2},subtext:{alignSelf:"flex-start"},focusedIcon:{color:e.colors.primary},icon:{alignSelf:"center",color:e.colors.gray600,paddingRight:e.spaces.space4},validationIcon:{alignSelf:"center",paddingLeft:e.spaces.space4},transition:{transition:"transform 150ms cubic-bezier(0.4, 0, 0.2, 1), color 150ms cubic-bezier(0.4, 0, 0.2, 1), font-size 150ms cubic-bezier(0.4, 0, 0.2, 1), padding-top 150ms cubic-bezier(0.4, 0, 0.2, 1)"}})))},piX5:function(e,t,s){"use strict";const a=s("rHpw").a.create((e=>({border:{borderRadius:e.borderRadii.small,borderWidth:e.borderWidths.small,borderColor:e.colors.gray200},focusedBorderValid:{boxShadow:`0 0 0 ${e.borderWidths.small} ${e.colors.primary}`,borderColor:e.colors.primary},focusedBorderInvalid:{boxShadow:`0 0 0 ${e.borderWidths.small} ${e.colors.red500}`},invalidBorderColor:{borderColor:e.colors.red500},invalidColor:{color:e.colors.red500},validColor:{color:e.colors.primary},disabled:{cursor:"default",opacity:.5,backgroundColor:e.colors.gray50,borderColor:e.colors.gray50}})));t.a=a},pidX:function(e,t,s){"use strict";s.d(t,"b",(function(){return l}));s("kYxP");var a=s("3XMw"),i=s.n(a),n=s("3A2y");const o=i.a.b2e94283,r=["title","screen_name","text","url","hashtags","via"];t.a=e=>{const t=e.state||{},s=e.query||{},[a,i,n,l,d,c]=r.map((e=>t[e]||s[e])),h=[a,i&&`@${i.toString()}`,n,l,d&&d.toString().split(",").map((e=>`#${e}`)).join(" "),c&&o({viaScreenName:c})].filter(Boolean).join(" ");return h?`${h} `:void 0};const l=e=>Object(n.a)(e,r)},rziq:function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return i}));const a="send-tweet",i="dismiss-composer"},sCk0:function(e,t,s){"use strict";var a=s("KEM+"),i=s.n(a),n=(s("kYxP"),s("ERkP")),o=s("zfvc"),r=s("zrc3");const l=Object.freeze({in:"in",out:"out",static:"static"});class d extends n.Component{constructor(...e){super(...e),i()(this,"state",{isAnimating:!1,renderChildren:n.Children.toArray(this.props.children).map((e=>({status:l.static,child:e})))}),i()(this,"_handleEachAnimateComplete",(()=>{const{isAnimating:e}=this.state,{onAnimateComplete:t,children:s}=this.props;e&&(t&&t(),this.setState({renderChildren:n.Children.toArray(s).map((e=>({status:l.static,child:e}))),isAnimating:!1}))}))}static getDerivedStateFromProps(e,t){const s=((e,t)=>{let s=0,a=0;const i=[];for(;a<e.length;){if(s>=t.length){i.push(...e.slice(a).map((e=>({child:e,status:l.out}))));break}const n=t[s],o=e[a];if(n.key===o.key)i.push({child:n,status:l.static}),s+=1;else{const e=Object(r.a)(t,(e=>e.key===o.key));e>=0?(i.push(...t.slice(s,e).map((e=>({child:e,status:l.in}))),{child:t[e],status:l.static}),s=e+1):i.push({child:o,status:l.out})}a+=1}return s<t.length&&i.push(...t.slice(s).map((e=>({child:e,status:l.in})))),i})(t.renderChildren.map((e=>e.child)),n.Children.toArray(e.children));return{renderChildren:s,isAnimating:!s.every((e=>e.status===l.static))}}render(){const{renderChildren:e}=this.state;return e.map((({status:e,child:t})=>n.createElement(o.a,{animateMount:e!==l.static,key:t.key,onAnimateComplete:this._handleEachAnimateComplete,show:e!==l.out},t)))}}t.a=d},yTN1:function(e,t,s){"use strict";var a=s("ERkP"),i=s("3XMw"),n=s.n(i),o=s("k6Ei"),r=s("rHpw"),l=s("+/1j"),d=s("MWbm");const c=n.a.c2fc878c,h=n.a.db11b27f,p=e=>e,u=r.a.create((({colors:e})=>({root:{alignItems:"flex-start",minHeight:30,minWidth:30},center:{alignItems:"center",justifyContent:"center",margin:"auto"},progressCircle:{transitionDuration:"0.2s",transitionProperty:"opacity"},hide:{opacity:0},text:{fontSize:13,lineHeight:.8,minWidth:16,textAlign:"center"},gray600:{color:e.gray600},red500:{color:e.red500}})));t.a=e=>{const{count:t,maxCount:s,formatNumber:i=p,warningCount:n}=e,m=s-t,g=m>=0?h({count:i(m)}):c({count:i(t-s)}),_=t>=n?a.createElement(l.a,{accessibilityLiveRegion:"polite","aria-relevant":"all",style:r.a.visuallyHidden},g):null,y=Math.min(1,1-m/s),b=t>=s?"red500":t>=n?"yellow500":"primary",C=a.createElement(o.a,{color:b,progress:y,size:t>=n?30:20,style:[u.progressCircle,m<=-10&&u.hide]}),f=t>=n?a.createElement(l.a,{style:[u.text,m>0?u.gray600:u.red500]},i(m)):null;return a.createElement(d.a,{style:[u.root,u.center]},_,C,a.createElement(d.a,{style:[r.a.absoluteFill,u.center]},f))}},zmS9:function(e,t,s){"use strict";var a=s("ERkP"),i=s("3XMw"),n=s.n(i),o=s("J0mu"),r=s("t62R"),l=s("rHpw"),d=s("QbaN");const c=n.a.bfb895b1,h=l.a.create((e=>({icon:{fontSize:e.fontSizes.normal,paddingRight:e.spaces.space12,textAlignVertical:"middle"}})));t.a=({scheduledFor:e,onPress:t})=>{const s=Object(d.c)(e),i=!!s&&(Object(d.h)(e)&&!Object(d.g)(s)&&!Object(d.f)(s)),n=Boolean(t);return s&&i?a.createElement(r.c,{color:"gray600",onPress:t,size:"small",withInteractiveStyling:n},a.createElement(o.a,{style:h.icon}),c({date:Object(d.b)(s),time:Object(d.i)(s)})):null}}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/shared~bundle.Compose~bundle.RichTextCompose~bundle.PlainTextCompose.423209b5.js.map